{"ast":null,"code":"/**\n * Flat-shaded ocean primitive.\n *\n * Based on a Codrops tutorial:\n * http://tympanus.net/codrops/2016/04/26/the-aviator-animating-basic-3d-scene-threejs/\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-ocean', {\n  defaultComponents: {\n    ocean: {},\n    rotation: {\n      x: -90,\n      y: 0,\n      z: 0\n    }\n  },\n  mappings: {\n    width: 'ocean.width',\n    depth: 'ocean.depth',\n    density: 'ocean.density',\n    amplitude: 'ocean.amplitude',\n    amplitudeVariance: 'ocean.amplitudeVariance',\n    speed: 'ocean.speed',\n    speedVariance: 'ocean.speedVariance',\n    color: 'ocean.color',\n    opacity: 'ocean.opacity'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('ocean', {\n  schema: {\n    // Dimensions of the ocean area.\n    width: {\n      default: 10,\n      min: 0\n    },\n    depth: {\n      default: 10,\n      min: 0\n    },\n    // Density of waves.\n    density: {\n      default: 10\n    },\n    // Wave amplitude and variance.\n    amplitude: {\n      default: 0.1\n    },\n    amplitudeVariance: {\n      default: 0.3\n    },\n    // Wave speed and variance.\n    speed: {\n      default: 1\n    },\n    speedVariance: {\n      default: 2\n    },\n    // Material.\n    color: {\n      default: '#7AD2F7',\n      type: 'color'\n    },\n    opacity: {\n      default: 0.8\n    }\n  },\n  /**\n   * Use play() instead of init(), because component mappings – unavailable as dependencies – are\n   * not guaranteed to have parsed when this component is initialized.\n   */\n  play: function () {\n    const el = this.el,\n      data = this.data;\n    let material = el.components.material;\n    const geometry = new THREE.PlaneGeometry(data.width, data.depth, data.density, data.density);\n    geometry.mergeVertices();\n    this.waves = [];\n    for (let v, i = 0, l = geometry.vertices.length; i < l; i++) {\n      v = geometry.vertices[i];\n      this.waves.push({\n        z: v.z,\n        ang: Math.random() * Math.PI * 2,\n        amp: data.amplitude + Math.random() * data.amplitudeVariance,\n        speed: (data.speed + Math.random() * data.speedVariance) / 1000 // radians / frame\n      });\n    }\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial({\n        color: data.color,\n        transparent: data.opacity < 1,\n        opacity: data.opacity,\n        shading: THREE.FlatShading\n      });\n    }\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    el.setObject3D('mesh', this.mesh);\n  },\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  },\n  tick: function (t, dt) {\n    if (!dt) return;\n    const verts = this.mesh.geometry.vertices;\n    for (let v, vprops, i = 0; v = verts[i]; i++) {\n      vprops = this.waves[i];\n      v.z = vprops.z + Math.sin(vprops.ang) * vprops.amp;\n      vprops.ang += vprops.speed * dt;\n    }\n    this.mesh.geometry.verticesNeedUpdate = true;\n  }\n});","map":{"version":3,"names":["module","exports","Primitive","AFRAME","registerPrimitive","defaultComponents","ocean","rotation","x","y","z","mappings","width","depth","density","amplitude","amplitudeVariance","speed","speedVariance","color","opacity","Component","registerComponent","schema","default","min","type","play","el","data","material","components","geometry","THREE","PlaneGeometry","mergeVertices","waves","v","i","l","vertices","length","push","ang","Math","random","PI","amp","MeshPhongMaterial","transparent","shading","FlatShading","mesh","Mesh","setObject3D","remove","removeObject3D","tick","t","dt","verts","vprops","sin","verticesNeedUpdate"],"sources":["/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/aframe-extras/src/primitives/a-ocean.js"],"sourcesContent":["/**\n * Flat-shaded ocean primitive.\n *\n * Based on a Codrops tutorial:\n * http://tympanus.net/codrops/2016/04/26/the-aviator-animating-basic-3d-scene-threejs/\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-ocean', {\n  defaultComponents: {\n    ocean: {},\n    rotation: {x: -90, y: 0, z: 0}\n  },\n  mappings: {\n    width: 'ocean.width',\n    depth: 'ocean.depth',\n    density: 'ocean.density',\n    amplitude: 'ocean.amplitude',\n    amplitudeVariance: 'ocean.amplitudeVariance',\n    speed: 'ocean.speed',\n    speedVariance: 'ocean.speedVariance',\n    color: 'ocean.color',\n    opacity: 'ocean.opacity'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('ocean', {\n  schema: {\n    // Dimensions of the ocean area.\n    width: {default: 10, min: 0},\n    depth: {default: 10, min: 0},\n\n    // Density of waves.\n    density: {default: 10},\n\n    // Wave amplitude and variance.\n    amplitude: {default: 0.1},\n    amplitudeVariance: {default: 0.3},\n\n    // Wave speed and variance.\n    speed: {default: 1},\n    speedVariance: {default: 2},\n\n    // Material.\n    color: {default: '#7AD2F7', type: 'color'},\n    opacity: {default: 0.8}\n  },\n\n  /**\n   * Use play() instead of init(), because component mappings – unavailable as dependencies – are\n   * not guaranteed to have parsed when this component is initialized.\n   */\n  play: function () {\n    const el = this.el,\n        data = this.data;\n    let material = el.components.material;\n\n    const geometry = new THREE.PlaneGeometry(data.width, data.depth, data.density, data.density);\n    geometry.mergeVertices();\n    this.waves = [];\n    for (let v, i = 0, l = geometry.vertices.length; i < l; i++) {\n      v = geometry.vertices[i];\n      this.waves.push({\n        z: v.z,\n        ang: Math.random() * Math.PI * 2,\n        amp: data.amplitude + Math.random() * data.amplitudeVariance,\n        speed: (data.speed + Math.random() * data.speedVariance) / 1000 // radians / frame\n      });\n    }\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial({\n        color: data.color,\n        transparent: data.opacity < 1,\n        opacity: data.opacity,\n        shading: THREE.FlatShading,\n      });\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    el.setObject3D('mesh', this.mesh);\n  },\n\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  },\n\n  tick: function (t, dt) {\n    if (!dt) return;\n\n    const verts = this.mesh.geometry.vertices;\n    for (let v, vprops, i = 0; (v = verts[i]); i++){\n      vprops = this.waves[i];\n      v.z = vprops.z + Math.sin(vprops.ang) * vprops.amp;\n      vprops.ang += vprops.speed * dt;\n    }\n    this.mesh.geometry.verticesNeedUpdate = true;\n  }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}