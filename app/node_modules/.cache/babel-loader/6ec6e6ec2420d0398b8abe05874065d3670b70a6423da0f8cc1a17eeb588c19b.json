{"ast":null,"code":"/**\n * Gamepad controls for A-Frame.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\n *\n * For more information about the Gamepad API, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n */\n\nvar GamepadButton = require('../../lib/GamepadButton'),\n  GamepadButtonEvent = require('../../lib/GamepadButtonEvent');\nvar JOYSTICK_EPS = 0.2;\nvar Hand = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\nvar Joystick = {\n  MOVEMENT: 1,\n  ROTATION: 2\n};\nmodule.exports = AFRAME.registerComponent('gamepad-controls', {\n  /*******************************************************************\n   * Statics\n   */\n\n  GamepadButton: GamepadButton,\n  /*******************************************************************\n   * Schema\n   */\n\n  schema: {\n    // Enable/disable gamepad-controls\n    enabled: {\n      default: true\n    },\n    // Heading element for rotation\n    camera: {\n      default: '[camera]',\n      type: 'selector'\n    },\n    // Rotation sensitivity\n    rotationSensitivity: {\n      default: 2.0\n    }\n  },\n  /*******************************************************************\n   * Core\n   */\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function init() {\n    var sceneEl = this.el.sceneEl;\n    this.system = sceneEl.systems['tracked-controls-webxr'] || {\n      controllers: []\n    };\n    this.prevTime = window.performance.now();\n\n    // Button state\n    this.buttons = {};\n\n    // Rotation\n    var rotation = this.el.object3D.rotation;\n    this.pitch = new THREE.Object3D();\n    this.pitch.rotation.x = THREE.Math.degToRad(rotation.x);\n    this.yaw = new THREE.Object3D();\n    this.yaw.position.y = 10;\n    this.yaw.rotation.y = THREE.Math.degToRad(rotation.y);\n    this.yaw.add(this.pitch);\n    this._lookVector = new THREE.Vector2();\n    this._moveVector = new THREE.Vector2();\n    this._dpadVector = new THREE.Vector2();\n    sceneEl.addBehavior(this);\n  },\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function update() {\n    this.tick();\n  },\n  /**\n   * Called on each iteration of main render loop.\n   */\n  tick: function tick(t, dt) {\n    this.updateButtonState();\n    this.updateRotation(dt);\n  },\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function remove() {},\n  /*******************************************************************\n   * Movement\n   */\n\n  isVelocityActive: function isVelocityActive() {\n    if (!this.data.enabled || !this.isConnected()) return false;\n    var dpad = this._dpadVector;\n    var joystick = this._moveVector;\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n    var inputX = dpad.x || joystick.x;\n    var inputY = dpad.y || joystick.y;\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    var dpad = this._dpadVector;\n    var joystick = this._moveVector;\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n    var inputX = dpad.x || joystick.x;\n    var inputY = dpad.y || joystick.y;\n    var dVelocity = new THREE.Vector3();\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\n      dVelocity.x += inputX;\n    }\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\n      dVelocity.z += inputY;\n    }\n    return dVelocity;\n  },\n  /*******************************************************************\n   * Rotation\n   */\n\n  isRotationActive: function isRotationActive() {\n    if (!this.data.enabled || !this.isConnected()) return false;\n    var joystick = this._lookVector;\n    this.getJoystick(Joystick.ROTATION, joystick);\n    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;\n  },\n  updateRotation: function updateRotation(dt) {\n    if (!this.isRotationActive()) return;\n    var data = this.data;\n    var yaw = this.yaw;\n    var pitch = this.pitch;\n    var lookControls = data.camera.components['look-controls'];\n    var hasLookControls = lookControls && lookControls.pitchObject && lookControls.yawObject;\n\n    // Sync with look-controls pitch/yaw if available.\n    if (hasLookControls) {\n      pitch.rotation.copy(lookControls.pitchObject.rotation);\n      yaw.rotation.copy(lookControls.yawObject.rotation);\n    }\n    var lookVector = this._lookVector;\n    this.getJoystick(Joystick.ROTATION, lookVector);\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\n    yaw.rotation.y -= lookVector.x;\n    pitch.rotation.x -= lookVector.y;\n    pitch.rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\n    data.camera.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0);\n\n    // Sync with look-controls pitch/yaw if available.\n    if (hasLookControls) {\n      lookControls.pitchObject.rotation.copy(pitch.rotation);\n      lookControls.yawObject.rotation.copy(yaw.rotation);\n    }\n  },\n  /*******************************************************************\n   * Button events\n   */\n\n  updateButtonState: function updateButtonState() {\n    var gamepad = this.getGamepad(Hand.RIGHT);\n    if (this.data.enabled && gamepad) {\n      // Fire DOM events for button state changes.\n      for (var i = 0; i < gamepad.buttons.length; i++) {\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\n        }\n        this.buttons[i] = gamepad.buttons[i].pressed;\n      }\n    } else if (Object.keys(this.buttons)) {\n      // Reset state if controls are disabled or controller is lost.\n      this.buttons = {};\n    }\n  },\n  emit: function emit(event) {\n    // Emit original event.\n    this.el.emit(event.type, event);\n\n    // Emit convenience event, identifying button index.\n    this.el.emit(event.type + ':' + event.index, new GamepadButtonEvent(event.type, event.index, event));\n  },\n  /*******************************************************************\n   * Gamepad state\n   */\n\n  /**\n   * Returns the Gamepad instance attached to the component. If connected,\n   * a proxy-controls component may provide access to Gamepad input from a\n   * remote device.\n   *\n   * @param {string} handPreference\n   * @return {Gamepad}\n   */\n  getGamepad: function () {\n    var _xrGamepads = [];\n    var _empty = [];\n    return function (handPreference) {\n      // https://github.com/donmccurdy/aframe-proxy-controls\n      var proxyControls = this.el.sceneEl.components['proxy-controls'];\n      var proxyGamepad = proxyControls && proxyControls.isConnected() && proxyControls.getGamepad(0);\n      if (proxyGamepad) return proxyGamepad;\n\n      // https://www.w3.org/TR/webxr/#dom-xrinputsource-handedness\n      _xrGamepads.length = 0;\n      for (var i = 0; i < this.system.controllers.length; i++) {\n        var xrController = this.system.controllers[i];\n        var xrGamepad = xrController ? xrController.gamepad : null;\n        _xrGamepads.push(xrGamepad);\n        if (xrGamepad && xrGamepad.handedness === handPreference) return xrGamepad;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/Gamepad/hand\n      var navGamepads = navigator.getGamepads ? navigator.getGamepads() : _empty;\n      for (var _i = 0; _i < navGamepads.length; _i++) {\n        var navGamepad = navGamepads[_i];\n        if (navGamepad && navGamepad.hand === handPreference) return navGamepad;\n      }\n      return _xrGamepads[0] || navGamepads[0];\n    };\n  }(),\n  /**\n   * Returns the state of the given button.\n   * @param  {number} index The button (0-N) for which to find state.\n   * @return {GamepadButton}\n   */\n  getButton: function getButton(index) {\n    return this.getGamepad(Hand.RIGHT).buttons[index];\n  },\n  /**\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\n   * @param  {number} index The axis (0-N) for which to find state.\n   * @return {number} On the interval [-1,1].\n   */\n  getAxis: function getAxis(index) {\n    return this.getGamepad(index > 1 ? Hand.RIGHT : Hand.LEFT).axes[index];\n  },\n  /**\n   * Returns the state of the specified joystick as a THREE.Vector2.\n   * @param  {Joystick} role\n   * @param  {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getJoystick: function getJoystick(index, target) {\n    var gamepad = this.getGamepad(index === Joystick.MOVEMENT ? Hand.LEFT : Hand.RIGHT);\n    if (gamepad.mapping === 'xr-standard') {\n      // See: https://github.com/donmccurdy/aframe-extras/issues/307\n      switch (index) {\n        case Joystick.MOVEMENT:\n          return target.set(gamepad.axes[2], gamepad.axes[3]);\n        case Joystick.ROTATION:\n          return target.set(gamepad.axes[0], gamepad.axes[1]);\n      }\n    } else {\n      switch (index) {\n        case Joystick.MOVEMENT:\n          return target.set(gamepad.axes[0], gamepad.axes[1]);\n        case Joystick.ROTATION:\n          return target.set(gamepad.axes[2], gamepad.axes[3]);\n      }\n    }\n    throw new Error('Unexpected joystick index \"%d\".', index);\n  },\n  /**\n   * Returns the state of the dpad as a THREE.Vector2.\n   * @param {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getDpad: function getDpad(target) {\n    var gamepad = this.getGamepad(Hand.LEFT);\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\n      return target.set(0, 0);\n    }\n    return target.set((gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0) + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0), (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0) + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0));\n  },\n  /**\n   * Returns true if the gamepad is currently connected to the system.\n   * @return {boolean}\n   */\n  isConnected: function isConnected() {\n    var gamepad = this.getGamepad(Hand.LEFT);\n    return !!(gamepad && gamepad.connected);\n  },\n  /**\n   * Returns a string containing some information about the controller. Result\n   * may vary across browsers, for a given controller.\n   * @return {string}\n   */\n  getID: function getID() {\n    return this.getGamepad(Hand.LEFT).id;\n  }\n});","map":{"version":3,"names":["GamepadButton","require","GamepadButtonEvent","JOYSTICK_EPS","Hand","LEFT","RIGHT","Joystick","MOVEMENT","ROTATION","module","exports","AFRAME","registerComponent","schema","enabled","default","camera","type","rotationSensitivity","init","sceneEl","el","system","systems","controllers","prevTime","window","performance","now","buttons","rotation","object3D","pitch","THREE","Object3D","x","Math","degToRad","yaw","position","y","add","_lookVector","Vector2","_moveVector","_dpadVector","addBehavior","update","tick","t","dt","updateButtonState","updateRotation","remove","isVelocityActive","data","isConnected","dpad","joystick","getDpad","getJoystick","inputX","inputY","abs","getVelocityDelta","dVelocity","Vector3","z","isRotationActive","lookControls","components","hasLookControls","pitchObject","yawObject","copy","lookVector","multiplyScalar","max","PI","min","set","gamepad","getGamepad","i","length","pressed","emit","Object","keys","event","index","_xrGamepads","_empty","handPreference","proxyControls","proxyGamepad","xrController","xrGamepad","push","handedness","navGamepads","navigator","getGamepads","navGamepad","hand","getButton","getAxis","axes","target","mapping","Error","DPAD_RIGHT","DPAD_LEFT","DPAD_UP","DPAD_DOWN","connected","getID","id"],"sources":["/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/aframe-extras/src/controls/gamepad-controls.js"],"sourcesContent":["/**\n * Gamepad controls for A-Frame.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\n *\n * For more information about the Gamepad API, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n */\n\nconst GamepadButton = require('../../lib/GamepadButton'),\n    GamepadButtonEvent = require('../../lib/GamepadButtonEvent');\n\nconst JOYSTICK_EPS = 0.2;\n\nconst Hand = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\n\nconst Joystick = {\n  MOVEMENT: 1,\n  ROTATION: 2\n};\n\nmodule.exports = AFRAME.registerComponent('gamepad-controls', {\n\n  /*******************************************************************\n   * Statics\n   */\n\n  GamepadButton: GamepadButton,\n\n  /*******************************************************************\n   * Schema\n   */\n\n  schema: {\n    // Enable/disable gamepad-controls\n    enabled: { default: true },\n\n    // Heading element for rotation\n    camera: { default: '[camera]', type: 'selector' },\n\n    // Rotation sensitivity\n    rotationSensitivity: { default: 2.0 },\n  },\n\n  /*******************************************************************\n   * Core\n   */\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function () {\n    const sceneEl = this.el.sceneEl;\n\n    this.system = sceneEl.systems['tracked-controls-webxr'] || {controllers: []};\n\n    this.prevTime = window.performance.now();\n\n    // Button state\n    this.buttons = {};\n\n    // Rotation\n    const rotation = this.el.object3D.rotation;\n    this.pitch = new THREE.Object3D();\n    this.pitch.rotation.x = THREE.Math.degToRad(rotation.x);\n    this.yaw = new THREE.Object3D();\n    this.yaw.position.y = 10;\n    this.yaw.rotation.y = THREE.Math.degToRad(rotation.y);\n    this.yaw.add(this.pitch);\n\n    this._lookVector = new THREE.Vector2();\n    this._moveVector = new THREE.Vector2();\n    this._dpadVector = new THREE.Vector2();\n\n    sceneEl.addBehavior(this);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function () { this.tick(); },\n\n  /**\n   * Called on each iteration of main render loop.\n   */\n  tick: function (t, dt) {\n    this.updateButtonState();\n    this.updateRotation(dt);\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function () { },\n\n  /*******************************************************************\n   * Movement\n   */\n\n  isVelocityActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\n  },\n\n  getVelocityDelta: function () {\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n    const dVelocity = new THREE.Vector3();\n\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\n      dVelocity.x += inputX;\n    }\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\n      dVelocity.z += inputY;\n    }\n\n    return dVelocity;\n  },\n\n  /*******************************************************************\n   * Rotation\n   */\n\n  isRotationActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const joystick = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, joystick);\n\n    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;\n  },\n\n  updateRotation: function (dt) {\n    if (!this.isRotationActive()) return;\n\n    const data = this.data;\n    const yaw = this.yaw;\n    const pitch = this.pitch;\n    const lookControls = data.camera.components['look-controls'];\n    const hasLookControls = lookControls && lookControls.pitchObject && lookControls.yawObject;\n\n    // Sync with look-controls pitch/yaw if available.\n    if (hasLookControls) {\n      pitch.rotation.copy(lookControls.pitchObject.rotation);\n      yaw.rotation.copy(lookControls.yawObject.rotation);\n    }\n\n    const lookVector = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, lookVector);\n\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\n\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\n    yaw.rotation.y -= lookVector.x;\n    pitch.rotation.x -= lookVector.y;\n    pitch.rotation.x = Math.max(- Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\n    data.camera.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0);\n\n    // Sync with look-controls pitch/yaw if available.\n    if (hasLookControls) {\n      lookControls.pitchObject.rotation.copy(pitch.rotation);\n      lookControls.yawObject.rotation.copy(yaw.rotation);\n    }\n  },\n\n  /*******************************************************************\n   * Button events\n   */\n\n  updateButtonState: function () {\n    const gamepad = this.getGamepad(Hand.RIGHT);\n    if (this.data.enabled && gamepad) {\n\n      // Fire DOM events for button state changes.\n      for (var i = 0; i < gamepad.buttons.length; i++) {\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\n        }\n        this.buttons[i] = gamepad.buttons[i].pressed;\n      }\n\n    } else if (Object.keys(this.buttons)) {\n      // Reset state if controls are disabled or controller is lost.\n      this.buttons = {};\n    }\n  },\n\n  emit: function (event) {\n    // Emit original event.\n    this.el.emit(event.type, event);\n\n    // Emit convenience event, identifying button index.\n    this.el.emit(\n      event.type + ':' + event.index,\n      new GamepadButtonEvent(event.type, event.index, event)\n    );\n  },\n\n  /*******************************************************************\n   * Gamepad state\n   */\n\n  /**\n   * Returns the Gamepad instance attached to the component. If connected,\n   * a proxy-controls component may provide access to Gamepad input from a\n   * remote device.\n   *\n   * @param {string} handPreference\n   * @return {Gamepad}\n   */\n  getGamepad: (function () {\n    const _xrGamepads = [];\n    const _empty = [];\n\n    return function (handPreference) {\n      // https://github.com/donmccurdy/aframe-proxy-controls\n      const proxyControls = this.el.sceneEl.components['proxy-controls'];\n      const proxyGamepad = proxyControls && proxyControls.isConnected()\n        && proxyControls.getGamepad(0);\n      if (proxyGamepad) return proxyGamepad;\n\n      // https://www.w3.org/TR/webxr/#dom-xrinputsource-handedness\n      _xrGamepads.length = 0;\n      for (let i = 0; i < this.system.controllers.length; i++) {\n        const xrController = this.system.controllers[i];\n        const xrGamepad = xrController ? xrController.gamepad : null;\n        _xrGamepads.push(xrGamepad);\n        if (xrGamepad && xrGamepad.handedness === handPreference) return xrGamepad;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/Gamepad/hand\n      const navGamepads = navigator.getGamepads ? navigator.getGamepads() : _empty;\n      for (let i = 0; i < navGamepads.length; i++) {\n        const navGamepad = navGamepads[i];\n        if (navGamepad && navGamepad.hand === handPreference) return navGamepad;\n      }\n\n      return _xrGamepads[0] || navGamepads[0];\n    };\n  })(),\n\n  /**\n   * Returns the state of the given button.\n   * @param  {number} index The button (0-N) for which to find state.\n   * @return {GamepadButton}\n   */\n  getButton: function (index) {\n    return this.getGamepad(Hand.RIGHT).buttons[index];\n  },\n\n  /**\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\n   * @param  {number} index The axis (0-N) for which to find state.\n   * @return {number} On the interval [-1,1].\n   */\n  getAxis: function (index) {\n    return this.getGamepad(index > 1 ? Hand.RIGHT : Hand.LEFT).axes[index];\n  },\n\n  /**\n   * Returns the state of the specified joystick as a THREE.Vector2.\n   * @param  {Joystick} role\n   * @param  {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getJoystick: function (index, target) {\n    const gamepad = this.getGamepad(index === Joystick.MOVEMENT ? Hand.LEFT : Hand.RIGHT);\n    if (gamepad.mapping === 'xr-standard') {\n      // See: https://github.com/donmccurdy/aframe-extras/issues/307\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[2], gamepad.axes[3]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[0], gamepad.axes[1]);\n      }\n    } else {\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[0], gamepad.axes[1]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], gamepad.axes[3]);\n      }\n    }\n    throw new Error('Unexpected joystick index \"%d\".', index);\n  },\n\n  /**\n   * Returns the state of the dpad as a THREE.Vector2.\n   * @param {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getDpad: function (target) {\n    const gamepad = this.getGamepad(Hand.LEFT);\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\n      return target.set(0, 0);\n    }\n    return target.set(\n      (gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0),\n      (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0)\n    );\n  },\n\n  /**\n   * Returns true if the gamepad is currently connected to the system.\n   * @return {boolean}\n   */\n  isConnected: function () {\n    const gamepad = this.getGamepad(Hand.LEFT);\n    return !!(gamepad && gamepad.connected);\n  },\n\n  /**\n   * Returns a string containing some information about the controller. Result\n   * may vary across browsers, for a given controller.\n   * @return {string}\n   */\n  getID: function () {\n    return this.getGamepad(Hand.LEFT).id;\n  }\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}