{"ast":null,"code":"import _createClass from \"/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { EventDispatcher, MathUtils, MOUSE, Quaternion, Vector2, Vector3 } from 'three';\nvar _changeEvent = {\n  type: 'change'\n};\nvar _startEvent = {\n  type: 'start'\n};\nvar _endEvent = {\n  type: 'end'\n};\nvar TrackballControls = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(TrackballControls, _EventDispatcher);\n  var _super = _createSuper(TrackballControls);\n  function TrackballControls(object, domElement) {\n    var _this;\n    _classCallCheck(this, TrackballControls);\n    _this = _super.call(this);\n    var scope = _assertThisInitialized(_this);\n    var STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      ZOOM: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_ZOOM_PAN: 4\n    };\n    _this.object = object;\n    _this.domElement = domElement;\n    _this.domElement.style.touchAction = 'none'; // disable touch scroll\n\n    // API\n\n    _this.enabled = true;\n    _this.screen = {\n      left: 0,\n      top: 0,\n      width: 0,\n      height: 0\n    };\n    _this.rotateSpeed = 1.0;\n    _this.zoomSpeed = 1.2;\n    _this.panSpeed = 0.3;\n    _this.noRotate = false;\n    _this.noZoom = false;\n    _this.noPan = false;\n    _this.staticMoving = false;\n    _this.dynamicDampingFactor = 0.2;\n    _this.minDistance = 0;\n    _this.maxDistance = Infinity;\n    _this.minZoom = 0;\n    _this.maxZoom = Infinity;\n    _this.keys = ['KeyA' /*A*/, 'KeyS' /*S*/, 'KeyD' /*D*/];\n\n    _this.mouseButtons = {\n      LEFT: MOUSE.ROTATE,\n      MIDDLE: MOUSE.DOLLY,\n      RIGHT: MOUSE.PAN\n    };\n\n    // internals\n\n    _this.target = new Vector3();\n    var EPS = 0.000001;\n    var lastPosition = new Vector3();\n    var lastZoom = 1;\n    var _state = STATE.NONE,\n      _keyState = STATE.NONE,\n      _touchZoomDistanceStart = 0,\n      _touchZoomDistanceEnd = 0,\n      _lastAngle = 0;\n    var _eye = new Vector3(),\n      _movePrev = new Vector2(),\n      _moveCurr = new Vector2(),\n      _lastAxis = new Vector3(),\n      _zoomStart = new Vector2(),\n      _zoomEnd = new Vector2(),\n      _panStart = new Vector2(),\n      _panEnd = new Vector2(),\n      _pointers = [],\n      _pointerPositions = {};\n\n    // for reset\n\n    _this.target0 = _this.target.clone();\n    _this.position0 = _this.object.position.clone();\n    _this.up0 = _this.object.up.clone();\n    _this.zoom0 = _this.object.zoom;\n\n    // methods\n\n    _this.handleResize = function () {\n      var box = scope.domElement.getBoundingClientRect();\n      // adjustments come from similar code in the jquery offset() function\n      var d = scope.domElement.ownerDocument.documentElement;\n      scope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n      scope.screen.top = box.top + window.pageYOffset - d.clientTop;\n      scope.screen.width = box.width;\n      scope.screen.height = box.height;\n    };\n    var getMouseOnScreen = function () {\n      var vector = new Vector2();\n      return function getMouseOnScreen(pageX, pageY) {\n        vector.set((pageX - scope.screen.left) / scope.screen.width, (pageY - scope.screen.top) / scope.screen.height);\n        return vector;\n      };\n    }();\n    var getMouseOnCircle = function () {\n      var vector = new Vector2();\n      return function getMouseOnCircle(pageX, pageY) {\n        vector.set((pageX - scope.screen.width * 0.5 - scope.screen.left) / (scope.screen.width * 0.5), (scope.screen.height + 2 * (scope.screen.top - pageY)) / scope.screen.width // screen.width intentional\n        );\n\n        return vector;\n      };\n    }();\n    _this.rotateCamera = function () {\n      var axis = new Vector3(),\n        quaternion = new Quaternion(),\n        eyeDirection = new Vector3(),\n        objectUpDirection = new Vector3(),\n        objectSidewaysDirection = new Vector3(),\n        moveDirection = new Vector3();\n      return function rotateCamera() {\n        moveDirection.set(_moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0);\n        var angle = moveDirection.length();\n        if (angle) {\n          _eye.copy(scope.object.position).sub(scope.target);\n          eyeDirection.copy(_eye).normalize();\n          objectUpDirection.copy(scope.object.up).normalize();\n          objectSidewaysDirection.crossVectors(objectUpDirection, eyeDirection).normalize();\n          objectUpDirection.setLength(_moveCurr.y - _movePrev.y);\n          objectSidewaysDirection.setLength(_moveCurr.x - _movePrev.x);\n          moveDirection.copy(objectUpDirection.add(objectSidewaysDirection));\n          axis.crossVectors(moveDirection, _eye).normalize();\n          angle *= scope.rotateSpeed;\n          quaternion.setFromAxisAngle(axis, angle);\n          _eye.applyQuaternion(quaternion);\n          scope.object.up.applyQuaternion(quaternion);\n          _lastAxis.copy(axis);\n          _lastAngle = angle;\n        } else if (!scope.staticMoving && _lastAngle) {\n          _lastAngle *= Math.sqrt(1.0 - scope.dynamicDampingFactor);\n          _eye.copy(scope.object.position).sub(scope.target);\n          quaternion.setFromAxisAngle(_lastAxis, _lastAngle);\n          _eye.applyQuaternion(quaternion);\n          scope.object.up.applyQuaternion(quaternion);\n        }\n        _movePrev.copy(_moveCurr);\n      };\n    }();\n    _this.zoomCamera = function () {\n      var factor;\n      if (_state === STATE.TOUCH_ZOOM_PAN) {\n        factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n        _touchZoomDistanceStart = _touchZoomDistanceEnd;\n        if (scope.object.isPerspectiveCamera) {\n          _eye.multiplyScalar(factor);\n        } else if (scope.object.isOrthographicCamera) {\n          scope.object.zoom = MathUtils.clamp(scope.object.zoom / factor, scope.minZoom, scope.maxZoom);\n          if (lastZoom !== scope.object.zoom) {\n            scope.object.updateProjectionMatrix();\n          }\n        } else {\n          console.warn('THREE.TrackballControls: Unsupported camera type');\n        }\n      } else {\n        factor = 1.0 + (_zoomEnd.y - _zoomStart.y) * scope.zoomSpeed;\n        if (factor !== 1.0 && factor > 0.0) {\n          if (scope.object.isPerspectiveCamera) {\n            _eye.multiplyScalar(factor);\n          } else if (scope.object.isOrthographicCamera) {\n            scope.object.zoom = MathUtils.clamp(scope.object.zoom / factor, scope.minZoom, scope.maxZoom);\n            if (lastZoom !== scope.object.zoom) {\n              scope.object.updateProjectionMatrix();\n            }\n          } else {\n            console.warn('THREE.TrackballControls: Unsupported camera type');\n          }\n        }\n        if (scope.staticMoving) {\n          _zoomStart.copy(_zoomEnd);\n        } else {\n          _zoomStart.y += (_zoomEnd.y - _zoomStart.y) * this.dynamicDampingFactor;\n        }\n      }\n    };\n    _this.panCamera = function () {\n      var mouseChange = new Vector2(),\n        objectUp = new Vector3(),\n        pan = new Vector3();\n      return function panCamera() {\n        mouseChange.copy(_panEnd).sub(_panStart);\n        if (mouseChange.lengthSq()) {\n          if (scope.object.isOrthographicCamera) {\n            var scale_x = (scope.object.right - scope.object.left) / scope.object.zoom / scope.domElement.clientWidth;\n            var scale_y = (scope.object.top - scope.object.bottom) / scope.object.zoom / scope.domElement.clientWidth;\n            mouseChange.x *= scale_x;\n            mouseChange.y *= scale_y;\n          }\n          mouseChange.multiplyScalar(_eye.length() * scope.panSpeed);\n          pan.copy(_eye).cross(scope.object.up).setLength(mouseChange.x);\n          pan.add(objectUp.copy(scope.object.up).setLength(mouseChange.y));\n          scope.object.position.add(pan);\n          scope.target.add(pan);\n          if (scope.staticMoving) {\n            _panStart.copy(_panEnd);\n          } else {\n            _panStart.add(mouseChange.subVectors(_panEnd, _panStart).multiplyScalar(scope.dynamicDampingFactor));\n          }\n        }\n      };\n    }();\n    _this.checkDistances = function () {\n      if (!scope.noZoom || !scope.noPan) {\n        if (_eye.lengthSq() > scope.maxDistance * scope.maxDistance) {\n          scope.object.position.addVectors(scope.target, _eye.setLength(scope.maxDistance));\n          _zoomStart.copy(_zoomEnd);\n        }\n        if (_eye.lengthSq() < scope.minDistance * scope.minDistance) {\n          scope.object.position.addVectors(scope.target, _eye.setLength(scope.minDistance));\n          _zoomStart.copy(_zoomEnd);\n        }\n      }\n    };\n    _this.update = function () {\n      _eye.subVectors(scope.object.position, scope.target);\n      if (!scope.noRotate) {\n        scope.rotateCamera();\n      }\n      if (!scope.noZoom) {\n        scope.zoomCamera();\n      }\n      if (!scope.noPan) {\n        scope.panCamera();\n      }\n      scope.object.position.addVectors(scope.target, _eye);\n      if (scope.object.isPerspectiveCamera) {\n        scope.checkDistances();\n        scope.object.lookAt(scope.target);\n        if (lastPosition.distanceToSquared(scope.object.position) > EPS) {\n          scope.dispatchEvent(_changeEvent);\n          lastPosition.copy(scope.object.position);\n        }\n      } else if (scope.object.isOrthographicCamera) {\n        scope.object.lookAt(scope.target);\n        if (lastPosition.distanceToSquared(scope.object.position) > EPS || lastZoom !== scope.object.zoom) {\n          scope.dispatchEvent(_changeEvent);\n          lastPosition.copy(scope.object.position);\n          lastZoom = scope.object.zoom;\n        }\n      } else {\n        console.warn('THREE.TrackballControls: Unsupported camera type');\n      }\n    };\n    _this.reset = function () {\n      _state = STATE.NONE;\n      _keyState = STATE.NONE;\n      scope.target.copy(scope.target0);\n      scope.object.position.copy(scope.position0);\n      scope.object.up.copy(scope.up0);\n      scope.object.zoom = scope.zoom0;\n      scope.object.updateProjectionMatrix();\n      _eye.subVectors(scope.object.position, scope.target);\n      scope.object.lookAt(scope.target);\n      scope.dispatchEvent(_changeEvent);\n      lastPosition.copy(scope.object.position);\n      lastZoom = scope.object.zoom;\n    };\n\n    // listeners\n\n    function onPointerDown(event) {\n      if (scope.enabled === false) return;\n      if (_pointers.length === 0) {\n        scope.domElement.setPointerCapture(event.pointerId);\n        scope.domElement.addEventListener('pointermove', onPointerMove);\n        scope.domElement.addEventListener('pointerup', onPointerUp);\n      }\n\n      //\n\n      addPointer(event);\n      if (event.pointerType === 'touch') {\n        onTouchStart(event);\n      } else {\n        onMouseDown(event);\n      }\n    }\n    function onPointerMove(event) {\n      if (scope.enabled === false) return;\n      if (event.pointerType === 'touch') {\n        onTouchMove(event);\n      } else {\n        onMouseMove(event);\n      }\n    }\n    function onPointerUp(event) {\n      if (scope.enabled === false) return;\n      if (event.pointerType === 'touch') {\n        onTouchEnd(event);\n      } else {\n        onMouseUp();\n      }\n\n      //\n\n      removePointer(event);\n      if (_pointers.length === 0) {\n        scope.domElement.releasePointerCapture(event.pointerId);\n        scope.domElement.removeEventListener('pointermove', onPointerMove);\n        scope.domElement.removeEventListener('pointerup', onPointerUp);\n      }\n    }\n    function onPointerCancel(event) {\n      removePointer(event);\n    }\n    function keydown(event) {\n      if (scope.enabled === false) return;\n      window.removeEventListener('keydown', keydown);\n      if (_keyState !== STATE.NONE) {\n        return;\n      } else if (event.code === scope.keys[STATE.ROTATE] && !scope.noRotate) {\n        _keyState = STATE.ROTATE;\n      } else if (event.code === scope.keys[STATE.ZOOM] && !scope.noZoom) {\n        _keyState = STATE.ZOOM;\n      } else if (event.code === scope.keys[STATE.PAN] && !scope.noPan) {\n        _keyState = STATE.PAN;\n      }\n    }\n    function keyup() {\n      if (scope.enabled === false) return;\n      _keyState = STATE.NONE;\n      window.addEventListener('keydown', keydown);\n    }\n    function onMouseDown(event) {\n      if (_state === STATE.NONE) {\n        switch (event.button) {\n          case scope.mouseButtons.LEFT:\n            _state = STATE.ROTATE;\n            break;\n          case scope.mouseButtons.MIDDLE:\n            _state = STATE.ZOOM;\n            break;\n          case scope.mouseButtons.RIGHT:\n            _state = STATE.PAN;\n            break;\n        }\n      }\n      var state = _keyState !== STATE.NONE ? _keyState : _state;\n      if (state === STATE.ROTATE && !scope.noRotate) {\n        _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n        _movePrev.copy(_moveCurr);\n      } else if (state === STATE.ZOOM && !scope.noZoom) {\n        _zoomStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n        _zoomEnd.copy(_zoomStart);\n      } else if (state === STATE.PAN && !scope.noPan) {\n        _panStart.copy(getMouseOnScreen(event.pageX, event.pageY));\n        _panEnd.copy(_panStart);\n      }\n      scope.dispatchEvent(_startEvent);\n    }\n    function onMouseMove(event) {\n      var state = _keyState !== STATE.NONE ? _keyState : _state;\n      if (state === STATE.ROTATE && !scope.noRotate) {\n        _movePrev.copy(_moveCurr);\n        _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n      } else if (state === STATE.ZOOM && !scope.noZoom) {\n        _zoomEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n      } else if (state === STATE.PAN && !scope.noPan) {\n        _panEnd.copy(getMouseOnScreen(event.pageX, event.pageY));\n      }\n    }\n    function onMouseUp() {\n      _state = STATE.NONE;\n      scope.dispatchEvent(_endEvent);\n    }\n    function onMouseWheel(event) {\n      if (scope.enabled === false) return;\n      if (scope.noZoom === true) return;\n      event.preventDefault();\n      switch (event.deltaMode) {\n        case 2:\n          // Zoom in pages\n          _zoomStart.y -= event.deltaY * 0.025;\n          break;\n        case 1:\n          // Zoom in lines\n          _zoomStart.y -= event.deltaY * 0.01;\n          break;\n        default:\n          // undefined, 0, assume pixels\n          _zoomStart.y -= event.deltaY * 0.00025;\n          break;\n      }\n      scope.dispatchEvent(_startEvent);\n      scope.dispatchEvent(_endEvent);\n    }\n    function onTouchStart(event) {\n      trackPointer(event);\n      switch (_pointers.length) {\n        case 1:\n          _state = STATE.TOUCH_ROTATE;\n          _moveCurr.copy(getMouseOnCircle(_pointers[0].pageX, _pointers[0].pageY));\n          _movePrev.copy(_moveCurr);\n          break;\n        default:\n          // 2 or more\n          _state = STATE.TOUCH_ZOOM_PAN;\n          var dx = _pointers[0].pageX - _pointers[1].pageX;\n          var dy = _pointers[0].pageY - _pointers[1].pageY;\n          _touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt(dx * dx + dy * dy);\n          var x = (_pointers[0].pageX + _pointers[1].pageX) / 2;\n          var y = (_pointers[0].pageY + _pointers[1].pageY) / 2;\n          _panStart.copy(getMouseOnScreen(x, y));\n          _panEnd.copy(_panStart);\n          break;\n      }\n      scope.dispatchEvent(_startEvent);\n    }\n    function onTouchMove(event) {\n      trackPointer(event);\n      switch (_pointers.length) {\n        case 1:\n          _movePrev.copy(_moveCurr);\n          _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n          break;\n        default:\n          // 2 or more\n\n          var position = getSecondPointerPosition(event);\n          var dx = event.pageX - position.x;\n          var dy = event.pageY - position.y;\n          _touchZoomDistanceEnd = Math.sqrt(dx * dx + dy * dy);\n          var x = (event.pageX + position.x) / 2;\n          var y = (event.pageY + position.y) / 2;\n          _panEnd.copy(getMouseOnScreen(x, y));\n          break;\n      }\n    }\n    function onTouchEnd(event) {\n      switch (_pointers.length) {\n        case 0:\n          _state = STATE.NONE;\n          break;\n        case 1:\n          _state = STATE.TOUCH_ROTATE;\n          _moveCurr.copy(getMouseOnCircle(event.pageX, event.pageY));\n          _movePrev.copy(_moveCurr);\n          break;\n        case 2:\n          _state = STATE.TOUCH_ZOOM_PAN;\n          for (var i = 0; i < _pointers.length; i++) {\n            if (_pointers[i].pointerId !== event.pointerId) {\n              var position = _pointerPositions[_pointers[i].pointerId];\n              _moveCurr.copy(getMouseOnCircle(position.x, position.y));\n              _movePrev.copy(_moveCurr);\n              break;\n            }\n          }\n          break;\n      }\n      scope.dispatchEvent(_endEvent);\n    }\n    function contextmenu(event) {\n      if (scope.enabled === false) return;\n      event.preventDefault();\n    }\n    function addPointer(event) {\n      _pointers.push(event);\n    }\n    function removePointer(event) {\n      delete _pointerPositions[event.pointerId];\n      for (var i = 0; i < _pointers.length; i++) {\n        if (_pointers[i].pointerId == event.pointerId) {\n          _pointers.splice(i, 1);\n          return;\n        }\n      }\n    }\n    function trackPointer(event) {\n      var position = _pointerPositions[event.pointerId];\n      if (position === undefined) {\n        position = new Vector2();\n        _pointerPositions[event.pointerId] = position;\n      }\n      position.set(event.pageX, event.pageY);\n    }\n    function getSecondPointerPosition(event) {\n      var pointer = event.pointerId === _pointers[0].pointerId ? _pointers[1] : _pointers[0];\n      return _pointerPositions[pointer.pointerId];\n    }\n    _this.dispose = function () {\n      scope.domElement.removeEventListener('contextmenu', contextmenu);\n      scope.domElement.removeEventListener('pointerdown', onPointerDown);\n      scope.domElement.removeEventListener('pointercancel', onPointerCancel);\n      scope.domElement.removeEventListener('wheel', onMouseWheel);\n      scope.domElement.removeEventListener('pointermove', onPointerMove);\n      scope.domElement.removeEventListener('pointerup', onPointerUp);\n      window.removeEventListener('keydown', keydown);\n      window.removeEventListener('keyup', keyup);\n    };\n    _this.domElement.addEventListener('contextmenu', contextmenu);\n    _this.domElement.addEventListener('pointerdown', onPointerDown);\n    _this.domElement.addEventListener('pointercancel', onPointerCancel);\n    _this.domElement.addEventListener('wheel', onMouseWheel, {\n      passive: false\n    });\n    window.addEventListener('keydown', keydown);\n    window.addEventListener('keyup', keyup);\n    _this.handleResize();\n\n    // force an update at start\n    _this.update();\n    return _this;\n  }\n  return _createClass(TrackballControls);\n}(EventDispatcher);\nexport { TrackballControls };","map":{"version":3,"names":["EventDispatcher","MathUtils","MOUSE","Quaternion","Vector2","Vector3","_changeEvent","type","_startEvent","_endEvent","TrackballControls","_EventDispatcher","_inherits","_super","_createSuper","object","domElement","_this","_classCallCheck","call","scope","_assertThisInitialized","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","style","touchAction","enabled","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","minZoom","maxZoom","keys","mouseButtons","LEFT","MIDDLE","DOLLY","RIGHT","target","EPS","lastPosition","lastZoom","_state","_keyState","_touchZoomDistanceStart","_touchZoomDistanceEnd","_lastAngle","_eye","_movePrev","_moveCurr","_lastAxis","_zoomStart","_zoomEnd","_panStart","_panEnd","_pointers","_pointerPositions","target0","clone","position0","position","up0","up","zoom0","zoom","handleResize","box","getBoundingClientRect","d","ownerDocument","documentElement","window","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","set","getMouseOnCircle","rotateCamera","axis","quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","x","y","angle","length","copy","sub","normalize","crossVectors","setLength","add","setFromAxisAngle","applyQuaternion","Math","sqrt","zoomCamera","factor","isPerspectiveCamera","multiplyScalar","isOrthographicCamera","clamp","updateProjectionMatrix","console","warn","panCamera","mouseChange","objectUp","pan","lengthSq","scale_x","right","clientWidth","scale_y","bottom","cross","subVectors","checkDistances","addVectors","update","lookAt","distanceToSquared","dispatchEvent","reset","onPointerDown","event","setPointerCapture","pointerId","addEventListener","onPointerMove","onPointerUp","addPointer","pointerType","onTouchStart","onMouseDown","onTouchMove","onMouseMove","onTouchEnd","onMouseUp","removePointer","releasePointerCapture","removeEventListener","onPointerCancel","keydown","code","keyup","button","state","onMouseWheel","preventDefault","deltaMode","deltaY","trackPointer","dx","dy","getSecondPointerPosition","i","contextmenu","push","splice","undefined","pointer","dispose","passive","_createClass"],"sources":["/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/three/examples/jsm/controls/TrackballControls.js"],"sourcesContent":["import {\n\tEventDispatcher,\n\tMathUtils,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from 'three';\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass TrackballControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\t\tconst STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// API\n\n\t\tthis.enabled = true;\n\n\t\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\t\tthis.rotateSpeed = 1.0;\n\t\tthis.zoomSpeed = 1.2;\n\t\tthis.panSpeed = 0.3;\n\n\t\tthis.noRotate = false;\n\t\tthis.noZoom = false;\n\t\tthis.noPan = false;\n\n\t\tthis.staticMoving = false;\n\t\tthis.dynamicDampingFactor = 0.2;\n\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\tthis.keys = [ 'KeyA' /*A*/, 'KeyS' /*S*/, 'KeyD' /*D*/ ];\n\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// internals\n\n\t\tthis.target = new Vector3();\n\n\t\tconst EPS = 0.000001;\n\n\t\tconst lastPosition = new Vector3();\n\t\tlet lastZoom = 1;\n\n\t\tlet _state = STATE.NONE,\n\t\t\t_keyState = STATE.NONE,\n\n\t\t\t_touchZoomDistanceStart = 0,\n\t\t\t_touchZoomDistanceEnd = 0,\n\n\t\t\t_lastAngle = 0;\n\n\t\tconst _eye = new Vector3(),\n\n\t\t\t_movePrev = new Vector2(),\n\t\t\t_moveCurr = new Vector2(),\n\n\t\t\t_lastAxis = new Vector3(),\n\n\t\t\t_zoomStart = new Vector2(),\n\t\t\t_zoomEnd = new Vector2(),\n\n\t\t\t_panStart = new Vector2(),\n\t\t\t_panEnd = new Vector2(),\n\n\t\t\t_pointers = [],\n\t\t\t_pointerPositions = {};\n\n\t\t// for reset\n\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.up0 = this.object.up.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// methods\n\n\t\tthis.handleResize = function () {\n\n\t\t\tconst box = scope.domElement.getBoundingClientRect();\n\t\t\t// adjustments come from similar code in the jquery offset() function\n\t\t\tconst d = scope.domElement.ownerDocument.documentElement;\n\t\t\tscope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\t\tscope.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\t\tscope.screen.width = box.width;\n\t\t\tscope.screen.height = box.height;\n\n\t\t};\n\n\t\tconst getMouseOnScreen = ( function () {\n\n\t\t\tconst vector = new Vector2();\n\n\t\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\t\tvector.set(\n\t\t\t\t\t( pageX - scope.screen.left ) / scope.screen.width,\n\t\t\t\t\t( pageY - scope.screen.top ) / scope.screen.height\n\t\t\t\t);\n\n\t\t\t\treturn vector;\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tconst getMouseOnCircle = ( function () {\n\n\t\t\tconst vector = new Vector2();\n\n\t\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\t\tvector.set(\n\t\t\t\t\t( ( pageX - scope.screen.width * 0.5 - scope.screen.left ) / ( scope.screen.width * 0.5 ) ),\n\t\t\t\t\t( ( scope.screen.height + 2 * ( scope.screen.top - pageY ) ) / scope.screen.width ) // screen.width intentional\n\t\t\t\t);\n\n\t\t\t\treturn vector;\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tthis.rotateCamera = ( function () {\n\n\t\t\tconst axis = new Vector3(),\n\t\t\t\tquaternion = new Quaternion(),\n\t\t\t\teyeDirection = new Vector3(),\n\t\t\t\tobjectUpDirection = new Vector3(),\n\t\t\t\tobjectSidewaysDirection = new Vector3(),\n\t\t\t\tmoveDirection = new Vector3();\n\n\t\t\treturn function rotateCamera() {\n\n\t\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\t\tlet angle = moveDirection.length();\n\n\t\t\t\tif ( angle ) {\n\n\t\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\n\t\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\t\tobjectUpDirection.copy( scope.object.up ).normalize();\n\t\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\n\t\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\n\t\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\n\t\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\n\t\t\t\t\tangle *= scope.rotateSpeed;\n\t\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t\t_lastAxis.copy( axis );\n\t\t\t\t\t_lastAngle = angle;\n\n\t\t\t\t} else if ( ! scope.staticMoving && _lastAngle ) {\n\n\t\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - scope.dynamicDampingFactor );\n\t\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\t\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\t\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t}\n\n\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t};\n\n\t\t}() );\n\n\n\t\tthis.zoomCamera = function () {\n\n\t\t\tlet factor;\n\n\t\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom = MathUtils.clamp( scope.object.zoom / factor, scope.minZoom, scope.maxZoom );\n\n\t\t\t\t\tif ( lastZoom !== scope.object.zoom ) {\n\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * scope.zoomSpeed;\n\n\t\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\tscope.object.zoom = MathUtils.clamp( scope.object.zoom / factor, scope.minZoom, scope.maxZoom );\n\n\t\t\t\t\t\tif ( lastZoom !== scope.object.zoom ) {\n\n\t\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.panCamera = ( function () {\n\n\t\t\tconst mouseChange = new Vector2(),\n\t\t\t\tobjectUp = new Vector3(),\n\t\t\t\tpan = new Vector3();\n\n\t\t\treturn function panCamera() {\n\n\t\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\t\tif ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\tconst scale_x = ( scope.object.right - scope.object.left ) / scope.object.zoom / scope.domElement.clientWidth;\n\t\t\t\t\t\tconst scale_y = ( scope.object.top - scope.object.bottom ) / scope.object.zoom / scope.domElement.clientWidth;\n\n\t\t\t\t\t\tmouseChange.x *= scale_x;\n\t\t\t\t\t\tmouseChange.y *= scale_y;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmouseChange.multiplyScalar( _eye.length() * scope.panSpeed );\n\n\t\t\t\t\tpan.copy( _eye ).cross( scope.object.up ).setLength( mouseChange.x );\n\t\t\t\t\tpan.add( objectUp.copy( scope.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t\tscope.object.position.add( pan );\n\t\t\t\t\tscope.target.add( pan );\n\n\t\t\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( scope.dynamicDampingFactor ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}() );\n\n\t\tthis.checkDistances = function () {\n\n\t\t\tif ( ! scope.noZoom || ! scope.noPan ) {\n\n\t\t\t\tif ( _eye.lengthSq() > scope.maxDistance * scope.maxDistance ) {\n\n\t\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.maxDistance ) );\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t}\n\n\t\t\t\tif ( _eye.lengthSq() < scope.minDistance * scope.minDistance ) {\n\n\t\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.minDistance ) );\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.update = function () {\n\n\t\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\t\tif ( ! scope.noRotate ) {\n\n\t\t\t\tscope.rotateCamera();\n\n\t\t\t}\n\n\t\t\tif ( ! scope.noZoom ) {\n\n\t\t\t\tscope.zoomCamera();\n\n\t\t\t}\n\n\t\t\tif ( ! scope.noPan ) {\n\n\t\t\t\tscope.panCamera();\n\n\t\t\t}\n\n\t\t\tscope.object.position.addVectors( scope.target, _eye );\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscope.checkDistances();\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\n\t\t\t\t}\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS || lastZoom !== scope.object.zoom ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastZoom = scope.object.zoom;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\t_state = STATE.NONE;\n\t\t\t_keyState = STATE.NONE;\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.up.copy( scope.up0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tlastPosition.copy( scope.object.position );\n\t\t\tlastZoom = scope.object.zoom;\n\n\t\t};\n\n\t\t// listeners\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( _pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchEnd( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseUp();\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tremovePointer( event );\n\n\t\t\tif ( _pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction onPointerCancel( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t}\n\n\t\tfunction keydown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\t\tif ( _keyState !== STATE.NONE ) {\n\n\t\t\t\treturn;\n\n\t\t\t} else if ( event.code === scope.keys[ STATE.ROTATE ] && ! scope.noRotate ) {\n\n\t\t\t\t_keyState = STATE.ROTATE;\n\n\t\t\t} else if ( event.code === scope.keys[ STATE.ZOOM ] && ! scope.noZoom ) {\n\n\t\t\t\t_keyState = STATE.ZOOM;\n\n\t\t\t} else if ( event.code === scope.keys[ STATE.PAN ] && ! scope.noPan ) {\n\n\t\t\t\t_keyState = STATE.PAN;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction keyup() {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t_keyState = STATE.NONE;\n\n\t\t\twindow.addEventListener( 'keydown', keydown );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tif ( _state === STATE.NONE ) {\n\n\t\t\t\tswitch ( event.button ) {\n\n\t\t\t\t\tcase scope.mouseButtons.LEFT:\n\t\t\t\t\t\t_state = STATE.ROTATE;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.mouseButtons.MIDDLE:\n\t\t\t\t\t\t_state = STATE.ZOOM;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.mouseButtons.RIGHT:\n\t\t\t\t\t\t_state = STATE.PAN;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\t\t\t\t_panEnd.copy( _panStart );\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tconst state = ( _keyState !== STATE.NONE ) ? _keyState : _state;\n\n\t\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseUp() {\n\n\t\t\t_state = STATE.NONE;\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( scope.noZoom === true ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tswitch ( event.deltaMode ) {\n\n\t\t\t\tcase 2:\n\t\t\t\t\t// Zoom in pages\n\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\t// Zoom in lines\n\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\tcase 1:\n\t\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( _pointers[ 0 ].pageX, _pointers[ 0 ].pageY ) );\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // 2 or more\n\t\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\t\tconst dx = _pointers[ 0 ].pageX - _pointers[ 1 ].pageX;\n\t\t\t\t\tconst dy = _pointers[ 0 ].pageY - _pointers[ 1 ].pageY;\n\t\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\t\tconst x = ( _pointers[ 0 ].pageX + _pointers[ 1 ].pageX ) / 2;\n\t\t\t\t\tconst y = ( _pointers[ 0 ].pageY + _pointers[ 1 ].pageY ) / 2;\n\t\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t\t_panEnd.copy( _panStart );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\tcase 1:\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // 2 or more\n\n\t\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\t\tconst dx = event.pageX - position.x;\n\t\t\t\t\tconst dy = event.pageY - position.y;\n\t\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\t\tconst x = ( event.pageX + position.x ) / 2;\n\t\t\t\t\tconst y = ( event.pageY + position.y ) / 2;\n\t\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchEnd( event ) {\n\n\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\tcase 0:\n\t\t\t\t\t_state = STATE.NONE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\n\t\t\t\t\tfor ( let i = 0; i < _pointers.length; i ++ ) {\n\n\t\t\t\t\t\tif ( _pointers[ i ].pointerId !== event.pointerId ) {\n\n\t\t\t\t\t\t\tconst position = _pointerPositions[ _pointers[ i ].pointerId ];\n\t\t\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( position.x, position.y ) );\n\t\t\t\t\t\t\t_movePrev.copy( _moveCurr );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction contextmenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\t_pointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete _pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < _pointers.length; i ++ ) {\n\n\t\t\t\tif ( _pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\t_pointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = _pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Vector2();\n\t\t\t\t_pointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === _pointers[ 0 ].pointerId ) ? _pointers[ 1 ] : _pointers[ 0 ];\n\n\t\t\treturn _pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', contextmenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\twindow.removeEventListener( 'keydown', keydown );\n\t\t\twindow.removeEventListener( 'keyup', keyup );\n\n\t\t};\n\n\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\tthis.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\n\t\twindow.addEventListener( 'keydown', keydown );\n\t\twindow.addEventListener( 'keyup', keyup );\n\n\t\tthis.handleResize();\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t}\n\n}\n\nexport { TrackballControls };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}