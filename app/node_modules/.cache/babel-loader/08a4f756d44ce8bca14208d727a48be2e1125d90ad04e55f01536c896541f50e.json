{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-selection'), require('d3-scale'), require('d3fc-data-join'), require('d3fc-rebind')) : typeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-selection', 'd3-scale', 'd3fc-data-join', 'd3fc-rebind'], factory) : factory(global.fc = global.fc || {}, global.d3, global.d3, global.d3, global.fc, global.fc);\n})(this, function (exports, d3Array, d3Selection, d3Scale, d3fcDataJoin, d3fcRebind) {\n  'use strict';\n\n  var functor = function (d) {\n    return typeof d === 'function' ? d : function () {\n      return d;\n    };\n  };\n  var label = function (layoutStrategy) {\n    var decorate = function decorate() {};\n    var size = function size() {\n      return [0, 0];\n    };\n    var position = function position(d, i) {\n      return [d.x, d.y];\n    };\n    var strategy = layoutStrategy || function (x) {\n      return x;\n    };\n    var component = function component() {};\n    var xScale = d3Scale.scaleIdentity();\n    var yScale = d3Scale.scaleIdentity();\n    var dataJoin$$1 = d3fcDataJoin.dataJoin('g', 'label');\n    var label = function label(selection) {\n      selection.each(function (data, index, group) {\n        var g = dataJoin$$1(d3Selection.select(group[index]), data).call(component);\n\n        // obtain the rectangular bounding boxes for each child\n        var nodes = g.nodes();\n        var childRects = nodes.map(function (node, i) {\n          var d = d3Selection.select(node).datum();\n          var pos = position(d, i, nodes);\n          var childPos = [xScale(pos[0]), yScale(pos[1])];\n          var childSize = size(d, i, nodes);\n          return {\n            hidden: false,\n            x: childPos[0],\n            y: childPos[1],\n            width: childSize[0],\n            height: childSize[1]\n          };\n        });\n\n        // apply the strategy to derive the layout. The strategy does not change the order\n        // or number of label.\n        var layout = strategy(childRects);\n        g.attr('style', function (_, i) {\n          return 'display:' + (layout[i].hidden ? 'none' : 'inherit');\n        }).attr('transform', function (_, i) {\n          return 'translate(' + layout[i].x + ', ' + layout[i].y + ')';\n        })\n        // set the layout width / height so that children can use SVG layout if required\n        .attr('layout-width', function (_, i) {\n          return layout[i].width;\n        }).attr('layout-height', function (_, i) {\n          return layout[i].height;\n        }).attr('anchor-x', function (d, i, g) {\n          return childRects[i].x - layout[i].x;\n        }).attr('anchor-y', function (d, i, g) {\n          return childRects[i].y - layout[i].y;\n        });\n        g.call(component);\n        decorate(g, data, index);\n      });\n    };\n    d3fcRebind.rebindAll(label, dataJoin$$1, d3fcRebind.include('key'));\n    d3fcRebind.rebindAll(label, strategy);\n    label.size = function () {\n      if (!arguments.length) {\n        return size;\n      }\n      size = functor(arguments.length <= 0 ? undefined : arguments[0]);\n      return label;\n    };\n    label.position = function () {\n      if (!arguments.length) {\n        return position;\n      }\n      position = functor(arguments.length <= 0 ? undefined : arguments[0]);\n      return label;\n    };\n    label.component = function () {\n      if (!arguments.length) {\n        return component;\n      }\n      component = arguments.length <= 0 ? undefined : arguments[0];\n      return label;\n    };\n    label.decorate = function () {\n      if (!arguments.length) {\n        return decorate;\n      }\n      decorate = arguments.length <= 0 ? undefined : arguments[0];\n      return label;\n    };\n    label.xScale = function () {\n      if (!arguments.length) {\n        return xScale;\n      }\n      xScale = arguments.length <= 0 ? undefined : arguments[0];\n      return label;\n    };\n    label.yScale = function () {\n      if (!arguments.length) {\n        return yScale;\n      }\n      yScale = arguments.length <= 0 ? undefined : arguments[0];\n      return label;\n    };\n    return label;\n  };\n  var textLabel = function (layoutStrategy) {\n    var padding = 2;\n    var value = function value(x) {\n      return x;\n    };\n    var textJoin = d3fcDataJoin.dataJoin('text');\n    var rectJoin = d3fcDataJoin.dataJoin('rect');\n    var pointJoin = d3fcDataJoin.dataJoin('circle');\n    var textLabel = function textLabel(selection) {\n      selection.each(function (data, index, group) {\n        var node = group[index];\n        var nodeSelection = d3Selection.select(node);\n        var width = Number(node.getAttribute('layout-width'));\n        var height = Number(node.getAttribute('layout-height'));\n        var rect = rectJoin(nodeSelection, [data]);\n        rect.attr('width', width).attr('height', height);\n        var anchorX = Number(node.getAttribute('anchor-x'));\n        var anchorY = Number(node.getAttribute('anchor-y'));\n        var circle = pointJoin(nodeSelection, [data]);\n        circle.attr('r', 2).attr('cx', anchorX).attr('cy', anchorY);\n        var text = textJoin(nodeSelection, [data]);\n        text.enter().attr('dy', '0.9em').attr('transform', 'translate(' + padding + ', ' + padding + ')');\n        text.text(value);\n      });\n    };\n    textLabel.padding = function () {\n      if (!arguments.length) {\n        return padding;\n      }\n      padding = arguments.length <= 0 ? undefined : arguments[0];\n      return textLabel;\n    };\n    textLabel.value = function () {\n      if (!arguments.length) {\n        return value;\n      }\n      value = functor(arguments.length <= 0 ? undefined : arguments[0]);\n      return textLabel;\n    };\n    return textLabel;\n  };\n  var isIntersecting = function isIntersecting(a, b) {\n    return !(a.x >= b.x + b.width || a.x + a.width <= b.x || a.y >= b.y + b.height || a.y + a.height <= b.y);\n  };\n  var intersect = function (a, b) {\n    if (isIntersecting(a, b)) {\n      var left = Math.max(a.x, b.x);\n      var right = Math.min(a.x + a.width, b.x + b.width);\n      var top = Math.max(a.y, b.y);\n      var bottom = Math.min(a.y + a.height, b.y + b.height);\n      return (right - left) * (bottom - top);\n    } else {\n      return 0;\n    }\n  };\n\n  // computes the area of overlap between the rectangle with the given index with the\n  // rectangles in the array\n  var collisionArea = function collisionArea(rectangles, index) {\n    return d3Array.sum(rectangles.map(function (d, i) {\n      return index === i ? 0 : intersect(rectangles[index], d);\n    }));\n  };\n\n  // computes the total overlapping area of all of the rectangles in the given array\n\n  var getPlacement = function getPlacement(x, y, width, height, location) {\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height,\n      location: location\n    };\n  };\n\n  // returns all the potential placements of the given label\n  var placements = function (label) {\n    var x = label.x;\n    var y = label.y;\n    var width = label.width;\n    var height = label.height;\n    return [getPlacement(x, y, width, height, 'bottom-right'), getPlacement(x - width, y, width, height, 'bottom-left'), getPlacement(x - width, y - height, width, height, 'top-left'), getPlacement(x, y - height, width, height, 'top-right'), getPlacement(x, y - height / 2, width, height, 'middle-right'), getPlacement(x - width / 2, y, width, height, 'bottom-center'), getPlacement(x - width, y - height / 2, width, height, 'middle-left'), getPlacement(x - width / 2, y - height, width, height, 'top-center')];\n  };\n  var get = function get(object, property, receiver) {\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n      if (parent === null) {\n        return undefined;\n      } else {\n        return get(parent, property, receiver);\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n      if (getter === undefined) {\n        return undefined;\n      }\n      return getter.call(receiver);\n    }\n  };\n  var set = function set(object, property, value, receiver) {\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n      if (parent !== null) {\n        set(parent, property, value, receiver);\n      }\n    } else if (\"value\" in desc && desc.writable) {\n      desc.value = value;\n    } else {\n      var setter = desc.set;\n      if (setter !== undefined) {\n        setter.call(receiver, value);\n      }\n    }\n    return value;\n  };\n  var toConsumableArray = function (arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n      return arr2;\n    } else {\n      return Array.from(arr);\n    }\n  };\n  var substitute = function substitute(array, index, substitution) {\n    return [].concat(toConsumableArray(array.slice(0, index)), [substitution], toConsumableArray(array.slice(index + 1)));\n  };\n  var lessThan = function lessThan(a, b) {\n    return a < b;\n  };\n\n  // a layout takes an array of rectangles and allows their locations to be optimised.\n  // it is constructed using two functions, locationScore, which score the placement of and\n  // individual rectangle, and winningScore which takes the scores for a rectangle\n  // at two different locations and assigns a winningScore.\n  var layoutComponent = function layoutComponent() {\n    var score = null;\n    var winningScore = lessThan;\n    var locationScore = function locationScore() {\n      return 0;\n    };\n    var rectangles = void 0;\n    var evaluatePlacement = function evaluatePlacement(placement, index) {\n      return score - locationScore(rectangles[index], index, rectangles) + locationScore(placement, index, substitute(rectangles, index, placement));\n    };\n    var layout = function layout(placement, index) {\n      if (!score) {\n        score = d3Array.sum(rectangles.map(function (r, i) {\n          return locationScore(r, i, rectangles);\n        }));\n      }\n      var newScore = evaluatePlacement(placement, index);\n      if (winningScore(newScore, score)) {\n        return layoutComponent().locationScore(locationScore).winningScore(winningScore).score(newScore).rectangles(substitute(rectangles, index, placement));\n      } else {\n        return layout;\n      }\n    };\n    layout.rectangles = function () {\n      if (!arguments.length) {\n        return rectangles;\n      }\n      rectangles = arguments.length <= 0 ? undefined : arguments[0];\n      return layout;\n    };\n    layout.score = function () {\n      if (!arguments.length) {\n        return score;\n      }\n      score = arguments.length <= 0 ? undefined : arguments[0];\n      return layout;\n    };\n    layout.winningScore = function () {\n      if (!arguments.length) {\n        return winningScore;\n      }\n      winningScore = arguments.length <= 0 ? undefined : arguments[0];\n      return layout;\n    };\n    layout.locationScore = function () {\n      if (!arguments.length) {\n        return locationScore;\n      }\n      locationScore = arguments.length <= 0 ? undefined : arguments[0];\n      return layout;\n    };\n    return layout;\n  };\n  var greedy = function () {\n    var bounds = void 0;\n    var containerPenalty = function containerPenalty(rectangle) {\n      return bounds ? rectangle.width * rectangle.height - intersect(rectangle, bounds) : 0;\n    };\n    var penaltyForRectangle = function penaltyForRectangle(rectangle, index, rectangles) {\n      return collisionArea(rectangles, index) + containerPenalty(rectangle);\n    };\n    var strategy = function strategy(data) {\n      var rectangles = layoutComponent().locationScore(penaltyForRectangle).rectangles(data);\n      data.forEach(function (rectangle, index) {\n        placements(rectangle).forEach(function (placement, placementIndex) {\n          rectangles = rectangles(placement, index);\n        });\n      });\n      return rectangles.rectangles();\n    };\n    strategy.bounds = function () {\n      if (!arguments.length) {\n        return bounds;\n      }\n      bounds = arguments.length <= 0 ? undefined : arguments[0];\n      return strategy;\n    };\n    return strategy;\n  };\n  var randomItem = function randomItem(array) {\n    return array[randomIndex(array)];\n  };\n  var randomIndex = function randomIndex(array) {\n    return Math.floor(Math.random() * array.length);\n  };\n  var annealing = function () {\n    var temperature = 1000;\n    var cooling = 1;\n    var bounds = void 0;\n    var orientationPenalty = function orientationPenalty(rectangle) {\n      switch (rectangle.location) {\n        case 'bottom-right':\n          return 0;\n        case 'middle-right':\n        case 'bottom-center':\n          return rectangle.width * rectangle.height / 8;\n      }\n      return rectangle.width * rectangle.height / 4;\n    };\n    var containerPenalty = function containerPenalty(rectangle) {\n      return bounds ? rectangle.width * rectangle.height - intersect(rectangle, bounds) : 0;\n    };\n    var penaltyForRectangle = function penaltyForRectangle(rectangle, index, rectangles) {\n      return collisionArea(rectangles, index) + containerPenalty(rectangle) + orientationPenalty(rectangle);\n    };\n    var strategy = function strategy(data) {\n      var currentTemperature = temperature;\n\n      // use annealing to allow a new score to be picked even if it is worse than the old\n      var winningScore = function winningScore(newScore, oldScore) {\n        return Math.exp((oldScore - newScore) / currentTemperature) > Math.random();\n      };\n      var rectangles = layoutComponent().locationScore(penaltyForRectangle).winningScore(winningScore).rectangles(data);\n      while (currentTemperature > 0) {\n        var index = randomIndex(data);\n        var randomNewPlacement = randomItem(placements(data[index]));\n        rectangles = rectangles(randomNewPlacement, index);\n        currentTemperature -= cooling;\n      }\n      return rectangles.rectangles();\n    };\n    strategy.temperature = function () {\n      if (!arguments.length) {\n        return temperature;\n      }\n      temperature = arguments.length <= 0 ? undefined : arguments[0];\n      return strategy;\n    };\n    strategy.cooling = function () {\n      if (!arguments.length) {\n        return cooling;\n      }\n      cooling = arguments.length <= 0 ? undefined : arguments[0];\n      return strategy;\n    };\n    strategy.bounds = function () {\n      if (!arguments.length) {\n        return bounds;\n      }\n      bounds = arguments.length <= 0 ? undefined : arguments[0];\n      return strategy;\n    };\n    return strategy;\n  };\n  var scanForObject = function scanForObject(array, comparator) {\n    return array[d3Array.scan(array, comparator)];\n  };\n  var removeOverlaps = function (adaptedStrategy) {\n    adaptedStrategy = adaptedStrategy || function (x) {\n      return x;\n    };\n    var removeOverlaps = function removeOverlaps(layout) {\n      layout = adaptedStrategy(layout);\n      var _loop = function _loop() {\n        // find the collision area for all overlapping rectangles, hiding the one\n        // with the greatest overlap\n        var visible = layout.filter(function (d) {\n          return !d.hidden;\n        });\n        var collisions = visible.map(function (d, i) {\n          return [d, collisionArea(visible, i)];\n        });\n        var maximumCollision = scanForObject(collisions, function (a, b) {\n          return b[1] - a[1];\n        });\n        if (maximumCollision[1] > 0) {\n          maximumCollision[0].hidden = true;\n        } else {\n          return 'break';\n        }\n      };\n      while (true) {\n        var _ret = _loop();\n        if (_ret === 'break') break;\n      }\n      return layout;\n    };\n    d3fcRebind.rebindAll(removeOverlaps, adaptedStrategy);\n    return removeOverlaps;\n  };\n  var boundingBox = function () {\n    var bounds = [0, 0];\n    var strategy = function strategy(data) {\n      return data.map(function (d, i) {\n        var tx = d.x;\n        var ty = d.y;\n        if (tx + d.width > bounds[0]) {\n          tx -= d.width;\n        }\n        if (ty + d.height > bounds[1]) {\n          ty -= d.height;\n        }\n        return {\n          height: d.height,\n          width: d.width,\n          x: tx,\n          y: ty\n        };\n      });\n    };\n    strategy.bounds = function () {\n      if (!arguments.length) {\n        return bounds;\n      }\n      bounds = arguments.length <= 0 ? undefined : arguments[0];\n      return strategy;\n    };\n    return strategy;\n  };\n  exports.layoutLabel = label;\n  exports.layoutTextLabel = textLabel;\n  exports.layoutGreedy = greedy;\n  exports.layoutAnnealing = annealing;\n  exports.layoutRemoveOverlaps = removeOverlaps;\n  exports.layoutBoundingBox = boundingBox;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"names":["global","factory","exports","module","require","define","amd","fc","d3","d3Array","d3Selection","d3Scale","d3fcDataJoin","d3fcRebind","functor","d","label","layoutStrategy","decorate","size","position","i","x","y","strategy","component","xScale","scaleIdentity","yScale","dataJoin$$1","dataJoin","selection","each","data","index","group","g","select","call","nodes","childRects","map","node","datum","pos","childPos","childSize","hidden","width","height","layout","attr","_","rebindAll","include","arguments","length","undefined","textLabel","padding","value","textJoin","rectJoin","pointJoin","nodeSelection","Number","getAttribute","rect","anchorX","anchorY","circle","text","enter","isIntersecting","a","b","intersect","left","Math","max","right","min","top","bottom","collisionArea","rectangles","sum","getPlacement","location","placements","get","object","property","receiver","Function","prototype","desc","Object","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","set","writable","setter","toConsumableArray","arr","Array","isArray","arr2","from","substitute","array","substitution","concat","slice","lessThan","layoutComponent","score","winningScore","locationScore","evaluatePlacement","placement","r","newScore","greedy","bounds","containerPenalty","rectangle","penaltyForRectangle","forEach","placementIndex","randomItem","randomIndex","floor","random","annealing","temperature","cooling","orientationPenalty","currentTemperature","oldScore","exp","randomNewPlacement","scanForObject","comparator","scan","removeOverlaps","adaptedStrategy","_loop","visible","filter","collisions","maximumCollision","_ret","boundingBox","tx","ty","layoutLabel","layoutTextLabel","layoutGreedy","layoutAnnealing","layoutRemoveOverlaps","layoutBoundingBox","defineProperty"],"sources":["/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/d3fc-label-layout/build/d3fc-label-layout.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-selection'), require('d3-scale'), require('d3fc-data-join'), require('d3fc-rebind')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-selection', 'd3-scale', 'd3fc-data-join', 'd3fc-rebind'], factory) :\n  (factory((global.fc = global.fc || {}),global.d3,global.d3,global.d3,global.fc,global.fc));\n}(this, (function (exports,d3Array,d3Selection,d3Scale,d3fcDataJoin,d3fcRebind) { 'use strict';\n\nvar functor = (function (d) {\n  return typeof d === 'function' ? d : function () {\n    return d;\n  };\n});\n\nvar label = (function (layoutStrategy) {\n\n    var decorate = function decorate() {};\n    var size = function size() {\n        return [0, 0];\n    };\n    var position = function position(d, i) {\n        return [d.x, d.y];\n    };\n    var strategy = layoutStrategy || function (x) {\n        return x;\n    };\n    var component = function component() {};\n    var xScale = d3Scale.scaleIdentity();\n    var yScale = d3Scale.scaleIdentity();\n\n    var dataJoin$$1 = d3fcDataJoin.dataJoin('g', 'label');\n\n    var label = function label(selection) {\n\n        selection.each(function (data, index, group) {\n\n            var g = dataJoin$$1(d3Selection.select(group[index]), data).call(component);\n\n            // obtain the rectangular bounding boxes for each child\n            var nodes = g.nodes();\n            var childRects = nodes.map(function (node, i) {\n                var d = d3Selection.select(node).datum();\n                var pos = position(d, i, nodes);\n                var childPos = [xScale(pos[0]), yScale(pos[1])];\n                var childSize = size(d, i, nodes);\n                return {\n                    hidden: false,\n                    x: childPos[0],\n                    y: childPos[1],\n                    width: childSize[0],\n                    height: childSize[1]\n                };\n            });\n\n            // apply the strategy to derive the layout. The strategy does not change the order\n            // or number of label.\n            var layout = strategy(childRects);\n\n            g.attr('style', function (_, i) {\n                return 'display:' + (layout[i].hidden ? 'none' : 'inherit');\n            }).attr('transform', function (_, i) {\n                return 'translate(' + layout[i].x + ', ' + layout[i].y + ')';\n            })\n            // set the layout width / height so that children can use SVG layout if required\n            .attr('layout-width', function (_, i) {\n                return layout[i].width;\n            }).attr('layout-height', function (_, i) {\n                return layout[i].height;\n            }).attr('anchor-x', function (d, i, g) {\n                return childRects[i].x - layout[i].x;\n            }).attr('anchor-y', function (d, i, g) {\n                return childRects[i].y - layout[i].y;\n            });\n\n            g.call(component);\n\n            decorate(g, data, index);\n        });\n    };\n\n    d3fcRebind.rebindAll(label, dataJoin$$1, d3fcRebind.include('key'));\n    d3fcRebind.rebindAll(label, strategy);\n\n    label.size = function () {\n        if (!arguments.length) {\n            return size;\n        }\n        size = functor(arguments.length <= 0 ? undefined : arguments[0]);\n        return label;\n    };\n\n    label.position = function () {\n        if (!arguments.length) {\n            return position;\n        }\n        position = functor(arguments.length <= 0 ? undefined : arguments[0]);\n        return label;\n    };\n\n    label.component = function () {\n        if (!arguments.length) {\n            return component;\n        }\n        component = arguments.length <= 0 ? undefined : arguments[0];\n        return label;\n    };\n\n    label.decorate = function () {\n        if (!arguments.length) {\n            return decorate;\n        }\n        decorate = arguments.length <= 0 ? undefined : arguments[0];\n        return label;\n    };\n\n    label.xScale = function () {\n        if (!arguments.length) {\n            return xScale;\n        }\n        xScale = arguments.length <= 0 ? undefined : arguments[0];\n        return label;\n    };\n\n    label.yScale = function () {\n        if (!arguments.length) {\n            return yScale;\n        }\n        yScale = arguments.length <= 0 ? undefined : arguments[0];\n        return label;\n    };\n\n    return label;\n});\n\nvar textLabel = (function (layoutStrategy) {\n\n    var padding = 2;\n    var value = function value(x) {\n        return x;\n    };\n\n    var textJoin = d3fcDataJoin.dataJoin('text');\n    var rectJoin = d3fcDataJoin.dataJoin('rect');\n    var pointJoin = d3fcDataJoin.dataJoin('circle');\n\n    var textLabel = function textLabel(selection) {\n        selection.each(function (data, index, group) {\n\n            var node = group[index];\n            var nodeSelection = d3Selection.select(node);\n\n            var width = Number(node.getAttribute('layout-width'));\n            var height = Number(node.getAttribute('layout-height'));\n            var rect = rectJoin(nodeSelection, [data]);\n            rect.attr('width', width).attr('height', height);\n\n            var anchorX = Number(node.getAttribute('anchor-x'));\n            var anchorY = Number(node.getAttribute('anchor-y'));\n            var circle = pointJoin(nodeSelection, [data]);\n            circle.attr('r', 2).attr('cx', anchorX).attr('cy', anchorY);\n\n            var text = textJoin(nodeSelection, [data]);\n            text.enter().attr('dy', '0.9em').attr('transform', 'translate(' + padding + ', ' + padding + ')');\n            text.text(value);\n        });\n    };\n\n    textLabel.padding = function () {\n        if (!arguments.length) {\n            return padding;\n        }\n        padding = arguments.length <= 0 ? undefined : arguments[0];\n        return textLabel;\n    };\n\n    textLabel.value = function () {\n        if (!arguments.length) {\n            return value;\n        }\n        value = functor(arguments.length <= 0 ? undefined : arguments[0]);\n        return textLabel;\n    };\n\n    return textLabel;\n});\n\nvar isIntersecting = function isIntersecting(a, b) {\n    return !(a.x >= b.x + b.width || a.x + a.width <= b.x || a.y >= b.y + b.height || a.y + a.height <= b.y);\n};\n\nvar intersect = (function (a, b) {\n    if (isIntersecting(a, b)) {\n        var left = Math.max(a.x, b.x);\n        var right = Math.min(a.x + a.width, b.x + b.width);\n        var top = Math.max(a.y, b.y);\n        var bottom = Math.min(a.y + a.height, b.y + b.height);\n        return (right - left) * (bottom - top);\n    } else {\n        return 0;\n    }\n});\n\n// computes the area of overlap between the rectangle with the given index with the\n// rectangles in the array\nvar collisionArea = function collisionArea(rectangles, index) {\n    return d3Array.sum(rectangles.map(function (d, i) {\n        return index === i ? 0 : intersect(rectangles[index], d);\n    }));\n};\n\n// computes the total overlapping area of all of the rectangles in the given array\n\nvar getPlacement = function getPlacement(x, y, width, height, location) {\n    return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        location: location\n    };\n};\n\n// returns all the potential placements of the given label\nvar placements = (function (label) {\n    var x = label.x;\n    var y = label.y;\n    var width = label.width;\n    var height = label.height;\n    return [getPlacement(x, y, width, height, 'bottom-right'), getPlacement(x - width, y, width, height, 'bottom-left'), getPlacement(x - width, y - height, width, height, 'top-left'), getPlacement(x, y - height, width, height, 'top-right'), getPlacement(x, y - height / 2, width, height, 'middle-right'), getPlacement(x - width / 2, y, width, height, 'bottom-center'), getPlacement(x - width, y - height / 2, width, height, 'middle-left'), getPlacement(x - width / 2, y - height, width, height, 'top-center')];\n});\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar set = function set(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      set(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar substitute = function substitute(array, index, substitution) {\n    return [].concat(toConsumableArray(array.slice(0, index)), [substitution], toConsumableArray(array.slice(index + 1)));\n};\n\nvar lessThan = function lessThan(a, b) {\n    return a < b;\n};\n\n// a layout takes an array of rectangles and allows their locations to be optimised.\n// it is constructed using two functions, locationScore, which score the placement of and\n// individual rectangle, and winningScore which takes the scores for a rectangle\n// at two different locations and assigns a winningScore.\nvar layoutComponent = function layoutComponent() {\n    var score = null;\n\n    var winningScore = lessThan;\n\n    var locationScore = function locationScore() {\n        return 0;\n    };\n\n    var rectangles = void 0;\n\n    var evaluatePlacement = function evaluatePlacement(placement, index) {\n        return score - locationScore(rectangles[index], index, rectangles) + locationScore(placement, index, substitute(rectangles, index, placement));\n    };\n\n    var layout = function layout(placement, index) {\n        if (!score) {\n            score = d3Array.sum(rectangles.map(function (r, i) {\n                return locationScore(r, i, rectangles);\n            }));\n        }\n\n        var newScore = evaluatePlacement(placement, index);\n\n        if (winningScore(newScore, score)) {\n            return layoutComponent().locationScore(locationScore).winningScore(winningScore).score(newScore).rectangles(substitute(rectangles, index, placement));\n        } else {\n            return layout;\n        }\n    };\n\n    layout.rectangles = function () {\n        if (!arguments.length) {\n            return rectangles;\n        }\n        rectangles = arguments.length <= 0 ? undefined : arguments[0];\n        return layout;\n    };\n    layout.score = function () {\n        if (!arguments.length) {\n            return score;\n        }\n        score = arguments.length <= 0 ? undefined : arguments[0];\n        return layout;\n    };\n    layout.winningScore = function () {\n        if (!arguments.length) {\n            return winningScore;\n        }\n        winningScore = arguments.length <= 0 ? undefined : arguments[0];\n        return layout;\n    };\n    layout.locationScore = function () {\n        if (!arguments.length) {\n            return locationScore;\n        }\n        locationScore = arguments.length <= 0 ? undefined : arguments[0];\n        return layout;\n    };\n\n    return layout;\n};\n\nvar greedy = (function () {\n\n    var bounds = void 0;\n\n    var containerPenalty = function containerPenalty(rectangle) {\n        return bounds ? rectangle.width * rectangle.height - intersect(rectangle, bounds) : 0;\n    };\n\n    var penaltyForRectangle = function penaltyForRectangle(rectangle, index, rectangles) {\n        return collisionArea(rectangles, index) + containerPenalty(rectangle);\n    };\n\n    var strategy = function strategy(data) {\n        var rectangles = layoutComponent().locationScore(penaltyForRectangle).rectangles(data);\n\n        data.forEach(function (rectangle, index) {\n            placements(rectangle).forEach(function (placement, placementIndex) {\n                rectangles = rectangles(placement, index);\n            });\n        });\n        return rectangles.rectangles();\n    };\n\n    strategy.bounds = function () {\n        if (!arguments.length) {\n            return bounds;\n        }\n        bounds = arguments.length <= 0 ? undefined : arguments[0];\n        return strategy;\n    };\n\n    return strategy;\n});\n\nvar randomItem = function randomItem(array) {\n    return array[randomIndex(array)];\n};\n\nvar randomIndex = function randomIndex(array) {\n    return Math.floor(Math.random() * array.length);\n};\n\nvar annealing = (function () {\n\n    var temperature = 1000;\n    var cooling = 1;\n    var bounds = void 0;\n\n    var orientationPenalty = function orientationPenalty(rectangle) {\n        switch (rectangle.location) {\n            case 'bottom-right':\n                return 0;\n            case 'middle-right':\n            case 'bottom-center':\n                return rectangle.width * rectangle.height / 8;\n        }\n        return rectangle.width * rectangle.height / 4;\n    };\n\n    var containerPenalty = function containerPenalty(rectangle) {\n        return bounds ? rectangle.width * rectangle.height - intersect(rectangle, bounds) : 0;\n    };\n\n    var penaltyForRectangle = function penaltyForRectangle(rectangle, index, rectangles) {\n        return collisionArea(rectangles, index) + containerPenalty(rectangle) + orientationPenalty(rectangle);\n    };\n\n    var strategy = function strategy(data) {\n        var currentTemperature = temperature;\n\n        // use annealing to allow a new score to be picked even if it is worse than the old\n        var winningScore = function winningScore(newScore, oldScore) {\n            return Math.exp((oldScore - newScore) / currentTemperature) > Math.random();\n        };\n\n        var rectangles = layoutComponent().locationScore(penaltyForRectangle).winningScore(winningScore).rectangles(data);\n\n        while (currentTemperature > 0) {\n            var index = randomIndex(data);\n            var randomNewPlacement = randomItem(placements(data[index]));\n            rectangles = rectangles(randomNewPlacement, index);\n            currentTemperature -= cooling;\n        }\n        return rectangles.rectangles();\n    };\n\n    strategy.temperature = function () {\n        if (!arguments.length) {\n            return temperature;\n        }\n        temperature = arguments.length <= 0 ? undefined : arguments[0];\n        return strategy;\n    };\n\n    strategy.cooling = function () {\n        if (!arguments.length) {\n            return cooling;\n        }\n        cooling = arguments.length <= 0 ? undefined : arguments[0];\n        return strategy;\n    };\n\n    strategy.bounds = function () {\n        if (!arguments.length) {\n            return bounds;\n        }\n        bounds = arguments.length <= 0 ? undefined : arguments[0];\n        return strategy;\n    };\n\n    return strategy;\n});\n\nvar scanForObject = function scanForObject(array, comparator) {\n    return array[d3Array.scan(array, comparator)];\n};\n\nvar removeOverlaps = (function (adaptedStrategy) {\n\n    adaptedStrategy = adaptedStrategy || function (x) {\n        return x;\n    };\n\n    var removeOverlaps = function removeOverlaps(layout) {\n        layout = adaptedStrategy(layout);\n\n        var _loop = function _loop() {\n            // find the collision area for all overlapping rectangles, hiding the one\n            // with the greatest overlap\n            var visible = layout.filter(function (d) {\n                return !d.hidden;\n            });\n            var collisions = visible.map(function (d, i) {\n                return [d, collisionArea(visible, i)];\n            });\n            var maximumCollision = scanForObject(collisions, function (a, b) {\n                return b[1] - a[1];\n            });\n            if (maximumCollision[1] > 0) {\n                maximumCollision[0].hidden = true;\n            } else {\n                return 'break';\n            }\n        };\n\n        while (true) {\n            var _ret = _loop();\n\n            if (_ret === 'break') break;\n        }\n        return layout;\n    };\n\n    d3fcRebind.rebindAll(removeOverlaps, adaptedStrategy);\n\n    return removeOverlaps;\n});\n\nvar boundingBox = (function () {\n\n    var bounds = [0, 0];\n\n    var strategy = function strategy(data) {\n        return data.map(function (d, i) {\n            var tx = d.x;\n            var ty = d.y;\n            if (tx + d.width > bounds[0]) {\n                tx -= d.width;\n            }\n\n            if (ty + d.height > bounds[1]) {\n                ty -= d.height;\n            }\n            return { height: d.height, width: d.width, x: tx, y: ty };\n        });\n    };\n\n    strategy.bounds = function () {\n        if (!arguments.length) {\n            return bounds;\n        }\n        bounds = arguments.length <= 0 ? undefined : arguments[0];\n        return strategy;\n    };\n\n    return strategy;\n});\n\nexports.layoutLabel = label;\nexports.layoutTextLabel = textLabel;\nexports.layoutGreedy = greedy;\nexports.layoutAnnealing = annealing;\nexports.layoutRemoveOverlaps = removeOverlaps;\nexports.layoutBoundingBox = boundingBox;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"],"mappings":"AAAC,WAAUA,MAAM,EAAEC,OAAO,EAAE;EAC1B,OAAOC,OAAO,KAAK,QAAQ,IAAI,OAAOC,MAAM,KAAK,WAAW,GAAGF,OAAO,CAACC,OAAO,EAAEE,OAAO,CAAC,UAAU,CAAC,EAAEA,OAAO,CAAC,cAAc,CAAC,EAAEA,OAAO,CAAC,UAAU,CAAC,EAAEA,OAAO,CAAC,gBAAgB,CAAC,EAAEA,OAAO,CAAC,aAAa,CAAC,CAAC,GACrM,OAAOC,MAAM,KAAK,UAAU,IAAIA,MAAM,CAACC,GAAG,GAAGD,MAAM,CAAC,CAAC,SAAS,EAAE,UAAU,EAAE,cAAc,EAAE,UAAU,EAAE,gBAAgB,EAAE,aAAa,CAAC,EAAEJ,OAAO,CAAC,GACjJA,OAAO,CAAED,MAAM,CAACO,EAAE,GAAGP,MAAM,CAACO,EAAE,IAAI,CAAC,CAAC,EAAEP,MAAM,CAACQ,EAAE,EAACR,MAAM,CAACQ,EAAE,EAACR,MAAM,CAACQ,EAAE,EAACR,MAAM,CAACO,EAAE,EAACP,MAAM,CAACO,EAAE,CAAE;AAC5F,CAAC,EAAC,IAAI,EAAG,UAAUL,OAAO,EAACO,OAAO,EAACC,WAAW,EAACC,OAAO,EAACC,YAAY,EAACC,UAAU,EAAE;EAAE,YAAY;;EAE9F,IAAIC,OAAO,GAAI,SAAAA,CAAUC,CAAC,EAAE;IAC1B,OAAO,OAAOA,CAAC,KAAK,UAAU,GAAGA,CAAC,GAAG,YAAY;MAC/C,OAAOA,CAAC;IACV,CAAC;EACH,CAAE;EAEF,IAAIC,KAAK,GAAI,SAAAA,CAAUC,cAAc,EAAE;IAEnC,IAAIC,QAAQ,GAAG,SAASA,QAAQA,CAAA,EAAG,CAAC,CAAC;IACrC,IAAIC,IAAI,GAAG,SAASA,IAAIA,CAAA,EAAG;MACvB,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;IACjB,CAAC;IACD,IAAIC,QAAQ,GAAG,SAASA,QAAQA,CAACL,CAAC,EAAEM,CAAC,EAAE;MACnC,OAAO,CAACN,CAAC,CAACO,CAAC,EAAEP,CAAC,CAACQ,CAAC,CAAC;IACrB,CAAC;IACD,IAAIC,QAAQ,GAAGP,cAAc,IAAI,UAAUK,CAAC,EAAE;MAC1C,OAAOA,CAAC;IACZ,CAAC;IACD,IAAIG,SAAS,GAAG,SAASA,SAASA,CAAA,EAAG,CAAC,CAAC;IACvC,IAAIC,MAAM,GAAGf,OAAO,CAACgB,aAAa,CAAC,CAAC;IACpC,IAAIC,MAAM,GAAGjB,OAAO,CAACgB,aAAa,CAAC,CAAC;IAEpC,IAAIE,WAAW,GAAGjB,YAAY,CAACkB,QAAQ,CAAC,GAAG,EAAE,OAAO,CAAC;IAErD,IAAId,KAAK,GAAG,SAASA,KAAKA,CAACe,SAAS,EAAE;MAElCA,SAAS,CAACC,IAAI,CAAC,UAAUC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAE;QAEzC,IAAIC,CAAC,GAAGP,WAAW,CAACnB,WAAW,CAAC2B,MAAM,CAACF,KAAK,CAACD,KAAK,CAAC,CAAC,EAAED,IAAI,CAAC,CAACK,IAAI,CAACb,SAAS,CAAC;;QAE3E;QACA,IAAIc,KAAK,GAAGH,CAAC,CAACG,KAAK,CAAC,CAAC;QACrB,IAAIC,UAAU,GAAGD,KAAK,CAACE,GAAG,CAAC,UAAUC,IAAI,EAAErB,CAAC,EAAE;UAC1C,IAAIN,CAAC,GAAGL,WAAW,CAAC2B,MAAM,CAACK,IAAI,CAAC,CAACC,KAAK,CAAC,CAAC;UACxC,IAAIC,GAAG,GAAGxB,QAAQ,CAACL,CAAC,EAAEM,CAAC,EAAEkB,KAAK,CAAC;UAC/B,IAAIM,QAAQ,GAAG,CAACnB,MAAM,CAACkB,GAAG,CAAC,CAAC,CAAC,CAAC,EAAEhB,MAAM,CAACgB,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;UAC/C,IAAIE,SAAS,GAAG3B,IAAI,CAACJ,CAAC,EAAEM,CAAC,EAAEkB,KAAK,CAAC;UACjC,OAAO;YACHQ,MAAM,EAAE,KAAK;YACbzB,CAAC,EAAEuB,QAAQ,CAAC,CAAC,CAAC;YACdtB,CAAC,EAAEsB,QAAQ,CAAC,CAAC,CAAC;YACdG,KAAK,EAAEF,SAAS,CAAC,CAAC,CAAC;YACnBG,MAAM,EAAEH,SAAS,CAAC,CAAC;UACvB,CAAC;QACL,CAAC,CAAC;;QAEF;QACA;QACA,IAAII,MAAM,GAAG1B,QAAQ,CAACgB,UAAU,CAAC;QAEjCJ,CAAC,CAACe,IAAI,CAAC,OAAO,EAAE,UAAUC,CAAC,EAAE/B,CAAC,EAAE;UAC5B,OAAO,UAAU,IAAI6B,MAAM,CAAC7B,CAAC,CAAC,CAAC0B,MAAM,GAAG,MAAM,GAAG,SAAS,CAAC;QAC/D,CAAC,CAAC,CAACI,IAAI,CAAC,WAAW,EAAE,UAAUC,CAAC,EAAE/B,CAAC,EAAE;UACjC,OAAO,YAAY,GAAG6B,MAAM,CAAC7B,CAAC,CAAC,CAACC,CAAC,GAAG,IAAI,GAAG4B,MAAM,CAAC7B,CAAC,CAAC,CAACE,CAAC,GAAG,GAAG;QAChE,CAAC;QACD;QAAA,CACC4B,IAAI,CAAC,cAAc,EAAE,UAAUC,CAAC,EAAE/B,CAAC,EAAE;UAClC,OAAO6B,MAAM,CAAC7B,CAAC,CAAC,CAAC2B,KAAK;QAC1B,CAAC,CAAC,CAACG,IAAI,CAAC,eAAe,EAAE,UAAUC,CAAC,EAAE/B,CAAC,EAAE;UACrC,OAAO6B,MAAM,CAAC7B,CAAC,CAAC,CAAC4B,MAAM;QAC3B,CAAC,CAAC,CAACE,IAAI,CAAC,UAAU,EAAE,UAAUpC,CAAC,EAAEM,CAAC,EAAEe,CAAC,EAAE;UACnC,OAAOI,UAAU,CAACnB,CAAC,CAAC,CAACC,CAAC,GAAG4B,MAAM,CAAC7B,CAAC,CAAC,CAACC,CAAC;QACxC,CAAC,CAAC,CAAC6B,IAAI,CAAC,UAAU,EAAE,UAAUpC,CAAC,EAAEM,CAAC,EAAEe,CAAC,EAAE;UACnC,OAAOI,UAAU,CAACnB,CAAC,CAAC,CAACE,CAAC,GAAG2B,MAAM,CAAC7B,CAAC,CAAC,CAACE,CAAC;QACxC,CAAC,CAAC;QAEFa,CAAC,CAACE,IAAI,CAACb,SAAS,CAAC;QAEjBP,QAAQ,CAACkB,CAAC,EAAEH,IAAI,EAAEC,KAAK,CAAC;MAC5B,CAAC,CAAC;IACN,CAAC;IAEDrB,UAAU,CAACwC,SAAS,CAACrC,KAAK,EAAEa,WAAW,EAAEhB,UAAU,CAACyC,OAAO,CAAC,KAAK,CAAC,CAAC;IACnEzC,UAAU,CAACwC,SAAS,CAACrC,KAAK,EAAEQ,QAAQ,CAAC;IAErCR,KAAK,CAACG,IAAI,GAAG,YAAY;MACrB,IAAI,CAACoC,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOrC,IAAI;MACf;MACAA,IAAI,GAAGL,OAAO,CAACyC,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,CAAC;MAChE,OAAOvC,KAAK;IAChB,CAAC;IAEDA,KAAK,CAACI,QAAQ,GAAG,YAAY;MACzB,IAAI,CAACmC,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOpC,QAAQ;MACnB;MACAA,QAAQ,GAAGN,OAAO,CAACyC,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,CAAC;MACpE,OAAOvC,KAAK;IAChB,CAAC;IAEDA,KAAK,CAACS,SAAS,GAAG,YAAY;MAC1B,IAAI,CAAC8B,SAAS,CAACC,MAAM,EAAE;QACnB,OAAO/B,SAAS;MACpB;MACAA,SAAS,GAAG8B,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MAC5D,OAAOvC,KAAK;IAChB,CAAC;IAEDA,KAAK,CAACE,QAAQ,GAAG,YAAY;MACzB,IAAI,CAACqC,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOtC,QAAQ;MACnB;MACAA,QAAQ,GAAGqC,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MAC3D,OAAOvC,KAAK;IAChB,CAAC;IAEDA,KAAK,CAACU,MAAM,GAAG,YAAY;MACvB,IAAI,CAAC6B,SAAS,CAACC,MAAM,EAAE;QACnB,OAAO9B,MAAM;MACjB;MACAA,MAAM,GAAG6B,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MACzD,OAAOvC,KAAK;IAChB,CAAC;IAEDA,KAAK,CAACY,MAAM,GAAG,YAAY;MACvB,IAAI,CAAC2B,SAAS,CAACC,MAAM,EAAE;QACnB,OAAO5B,MAAM;MACjB;MACAA,MAAM,GAAG2B,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MACzD,OAAOvC,KAAK;IAChB,CAAC;IAED,OAAOA,KAAK;EAChB,CAAE;EAEF,IAAI0C,SAAS,GAAI,SAAAA,CAAUzC,cAAc,EAAE;IAEvC,IAAI0C,OAAO,GAAG,CAAC;IACf,IAAIC,KAAK,GAAG,SAASA,KAAKA,CAACtC,CAAC,EAAE;MAC1B,OAAOA,CAAC;IACZ,CAAC;IAED,IAAIuC,QAAQ,GAAGjD,YAAY,CAACkB,QAAQ,CAAC,MAAM,CAAC;IAC5C,IAAIgC,QAAQ,GAAGlD,YAAY,CAACkB,QAAQ,CAAC,MAAM,CAAC;IAC5C,IAAIiC,SAAS,GAAGnD,YAAY,CAACkB,QAAQ,CAAC,QAAQ,CAAC;IAE/C,IAAI4B,SAAS,GAAG,SAASA,SAASA,CAAC3B,SAAS,EAAE;MAC1CA,SAAS,CAACC,IAAI,CAAC,UAAUC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAE;QAEzC,IAAIO,IAAI,GAAGP,KAAK,CAACD,KAAK,CAAC;QACvB,IAAI8B,aAAa,GAAGtD,WAAW,CAAC2B,MAAM,CAACK,IAAI,CAAC;QAE5C,IAAIM,KAAK,GAAGiB,MAAM,CAACvB,IAAI,CAACwB,YAAY,CAAC,cAAc,CAAC,CAAC;QACrD,IAAIjB,MAAM,GAAGgB,MAAM,CAACvB,IAAI,CAACwB,YAAY,CAAC,eAAe,CAAC,CAAC;QACvD,IAAIC,IAAI,GAAGL,QAAQ,CAACE,aAAa,EAAE,CAAC/B,IAAI,CAAC,CAAC;QAC1CkC,IAAI,CAAChB,IAAI,CAAC,OAAO,EAAEH,KAAK,CAAC,CAACG,IAAI,CAAC,QAAQ,EAAEF,MAAM,CAAC;QAEhD,IAAImB,OAAO,GAAGH,MAAM,CAACvB,IAAI,CAACwB,YAAY,CAAC,UAAU,CAAC,CAAC;QACnD,IAAIG,OAAO,GAAGJ,MAAM,CAACvB,IAAI,CAACwB,YAAY,CAAC,UAAU,CAAC,CAAC;QACnD,IAAII,MAAM,GAAGP,SAAS,CAACC,aAAa,EAAE,CAAC/B,IAAI,CAAC,CAAC;QAC7CqC,MAAM,CAACnB,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAACA,IAAI,CAAC,IAAI,EAAEiB,OAAO,CAAC,CAACjB,IAAI,CAAC,IAAI,EAAEkB,OAAO,CAAC;QAE3D,IAAIE,IAAI,GAAGV,QAAQ,CAACG,aAAa,EAAE,CAAC/B,IAAI,CAAC,CAAC;QAC1CsC,IAAI,CAACC,KAAK,CAAC,CAAC,CAACrB,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAACA,IAAI,CAAC,WAAW,EAAE,YAAY,GAAGQ,OAAO,GAAG,IAAI,GAAGA,OAAO,GAAG,GAAG,CAAC;QACjGY,IAAI,CAACA,IAAI,CAACX,KAAK,CAAC;MACpB,CAAC,CAAC;IACN,CAAC;IAEDF,SAAS,CAACC,OAAO,GAAG,YAAY;MAC5B,IAAI,CAACJ,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOG,OAAO;MAClB;MACAA,OAAO,GAAGJ,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MAC1D,OAAOG,SAAS;IACpB,CAAC;IAEDA,SAAS,CAACE,KAAK,GAAG,YAAY;MAC1B,IAAI,CAACL,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOI,KAAK;MAChB;MACAA,KAAK,GAAG9C,OAAO,CAACyC,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,CAAC;MACjE,OAAOG,SAAS;IACpB,CAAC;IAED,OAAOA,SAAS;EACpB,CAAE;EAEF,IAAIe,cAAc,GAAG,SAASA,cAAcA,CAACC,CAAC,EAAEC,CAAC,EAAE;IAC/C,OAAO,EAAED,CAAC,CAACpD,CAAC,IAAIqD,CAAC,CAACrD,CAAC,GAAGqD,CAAC,CAAC3B,KAAK,IAAI0B,CAAC,CAACpD,CAAC,GAAGoD,CAAC,CAAC1B,KAAK,IAAI2B,CAAC,CAACrD,CAAC,IAAIoD,CAAC,CAACnD,CAAC,IAAIoD,CAAC,CAACpD,CAAC,GAAGoD,CAAC,CAAC1B,MAAM,IAAIyB,CAAC,CAACnD,CAAC,GAAGmD,CAAC,CAACzB,MAAM,IAAI0B,CAAC,CAACpD,CAAC,CAAC;EAC5G,CAAC;EAED,IAAIqD,SAAS,GAAI,SAAAA,CAAUF,CAAC,EAAEC,CAAC,EAAE;IAC7B,IAAIF,cAAc,CAACC,CAAC,EAAEC,CAAC,CAAC,EAAE;MACtB,IAAIE,IAAI,GAAGC,IAAI,CAACC,GAAG,CAACL,CAAC,CAACpD,CAAC,EAAEqD,CAAC,CAACrD,CAAC,CAAC;MAC7B,IAAI0D,KAAK,GAAGF,IAAI,CAACG,GAAG,CAACP,CAAC,CAACpD,CAAC,GAAGoD,CAAC,CAAC1B,KAAK,EAAE2B,CAAC,CAACrD,CAAC,GAAGqD,CAAC,CAAC3B,KAAK,CAAC;MAClD,IAAIkC,GAAG,GAAGJ,IAAI,CAACC,GAAG,CAACL,CAAC,CAACnD,CAAC,EAAEoD,CAAC,CAACpD,CAAC,CAAC;MAC5B,IAAI4D,MAAM,GAAGL,IAAI,CAACG,GAAG,CAACP,CAAC,CAACnD,CAAC,GAAGmD,CAAC,CAACzB,MAAM,EAAE0B,CAAC,CAACpD,CAAC,GAAGoD,CAAC,CAAC1B,MAAM,CAAC;MACrD,OAAO,CAAC+B,KAAK,GAAGH,IAAI,KAAKM,MAAM,GAAGD,GAAG,CAAC;IAC1C,CAAC,MAAM;MACH,OAAO,CAAC;IACZ;EACJ,CAAE;;EAEF;EACA;EACA,IAAIE,aAAa,GAAG,SAASA,aAAaA,CAACC,UAAU,EAAEnD,KAAK,EAAE;IAC1D,OAAOzB,OAAO,CAAC6E,GAAG,CAACD,UAAU,CAAC5C,GAAG,CAAC,UAAU1B,CAAC,EAAEM,CAAC,EAAE;MAC9C,OAAOa,KAAK,KAAKb,CAAC,GAAG,CAAC,GAAGuD,SAAS,CAACS,UAAU,CAACnD,KAAK,CAAC,EAAEnB,CAAC,CAAC;IAC5D,CAAC,CAAC,CAAC;EACP,CAAC;;EAED;;EAEA,IAAIwE,YAAY,GAAG,SAASA,YAAYA,CAACjE,CAAC,EAAEC,CAAC,EAAEyB,KAAK,EAAEC,MAAM,EAAEuC,QAAQ,EAAE;IACpE,OAAO;MACHlE,CAAC,EAAEA,CAAC;MACJC,CAAC,EAAEA,CAAC;MACJyB,KAAK,EAAEA,KAAK;MACZC,MAAM,EAAEA,MAAM;MACduC,QAAQ,EAAEA;IACd,CAAC;EACL,CAAC;;EAED;EACA,IAAIC,UAAU,GAAI,SAAAA,CAAUzE,KAAK,EAAE;IAC/B,IAAIM,CAAC,GAAGN,KAAK,CAACM,CAAC;IACf,IAAIC,CAAC,GAAGP,KAAK,CAACO,CAAC;IACf,IAAIyB,KAAK,GAAGhC,KAAK,CAACgC,KAAK;IACvB,IAAIC,MAAM,GAAGjC,KAAK,CAACiC,MAAM;IACzB,OAAO,CAACsC,YAAY,CAACjE,CAAC,EAAEC,CAAC,EAAEyB,KAAK,EAAEC,MAAM,EAAE,cAAc,CAAC,EAAEsC,YAAY,CAACjE,CAAC,GAAG0B,KAAK,EAAEzB,CAAC,EAAEyB,KAAK,EAAEC,MAAM,EAAE,aAAa,CAAC,EAAEsC,YAAY,CAACjE,CAAC,GAAG0B,KAAK,EAAEzB,CAAC,GAAG0B,MAAM,EAAED,KAAK,EAAEC,MAAM,EAAE,UAAU,CAAC,EAAEsC,YAAY,CAACjE,CAAC,EAAEC,CAAC,GAAG0B,MAAM,EAAED,KAAK,EAAEC,MAAM,EAAE,WAAW,CAAC,EAAEsC,YAAY,CAACjE,CAAC,EAAEC,CAAC,GAAG0B,MAAM,GAAG,CAAC,EAAED,KAAK,EAAEC,MAAM,EAAE,cAAc,CAAC,EAAEsC,YAAY,CAACjE,CAAC,GAAG0B,KAAK,GAAG,CAAC,EAAEzB,CAAC,EAAEyB,KAAK,EAAEC,MAAM,EAAE,eAAe,CAAC,EAAEsC,YAAY,CAACjE,CAAC,GAAG0B,KAAK,EAAEzB,CAAC,GAAG0B,MAAM,GAAG,CAAC,EAAED,KAAK,EAAEC,MAAM,EAAE,aAAa,CAAC,EAAEsC,YAAY,CAACjE,CAAC,GAAG0B,KAAK,GAAG,CAAC,EAAEzB,CAAC,GAAG0B,MAAM,EAAED,KAAK,EAAEC,MAAM,EAAE,YAAY,CAAC,CAAC;EAC9f,CAAE;EAEF,IAAIyC,GAAG,GAAG,SAASA,GAAGA,CAACC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;IACjD,IAAIF,MAAM,KAAK,IAAI,EAAEA,MAAM,GAAGG,QAAQ,CAACC,SAAS;IAChD,IAAIC,IAAI,GAAGC,MAAM,CAACC,wBAAwB,CAACP,MAAM,EAAEC,QAAQ,CAAC;IAE5D,IAAII,IAAI,KAAKvC,SAAS,EAAE;MACtB,IAAI0C,MAAM,GAAGF,MAAM,CAACG,cAAc,CAACT,MAAM,CAAC;MAE1C,IAAIQ,MAAM,KAAK,IAAI,EAAE;QACnB,OAAO1C,SAAS;MAClB,CAAC,MAAM;QACL,OAAOiC,GAAG,CAACS,MAAM,EAAEP,QAAQ,EAAEC,QAAQ,CAAC;MACxC;IACF,CAAC,MAAM,IAAI,OAAO,IAAIG,IAAI,EAAE;MAC1B,OAAOA,IAAI,CAACpC,KAAK;IACnB,CAAC,MAAM;MACL,IAAIyC,MAAM,GAAGL,IAAI,CAACN,GAAG;MAErB,IAAIW,MAAM,KAAK5C,SAAS,EAAE;QACxB,OAAOA,SAAS;MAClB;MAEA,OAAO4C,MAAM,CAAC/D,IAAI,CAACuD,QAAQ,CAAC;IAC9B;EACF,CAAC;EAkBD,IAAIS,GAAG,GAAG,SAASA,GAAGA,CAACX,MAAM,EAAEC,QAAQ,EAAEhC,KAAK,EAAEiC,QAAQ,EAAE;IACxD,IAAIG,IAAI,GAAGC,MAAM,CAACC,wBAAwB,CAACP,MAAM,EAAEC,QAAQ,CAAC;IAE5D,IAAII,IAAI,KAAKvC,SAAS,EAAE;MACtB,IAAI0C,MAAM,GAAGF,MAAM,CAACG,cAAc,CAACT,MAAM,CAAC;MAE1C,IAAIQ,MAAM,KAAK,IAAI,EAAE;QACnBG,GAAG,CAACH,MAAM,EAAEP,QAAQ,EAAEhC,KAAK,EAAEiC,QAAQ,CAAC;MACxC;IACF,CAAC,MAAM,IAAI,OAAO,IAAIG,IAAI,IAAIA,IAAI,CAACO,QAAQ,EAAE;MAC3CP,IAAI,CAACpC,KAAK,GAAGA,KAAK;IACpB,CAAC,MAAM;MACL,IAAI4C,MAAM,GAAGR,IAAI,CAACM,GAAG;MAErB,IAAIE,MAAM,KAAK/C,SAAS,EAAE;QACxB+C,MAAM,CAAClE,IAAI,CAACuD,QAAQ,EAAEjC,KAAK,CAAC;MAC9B;IACF;IAEA,OAAOA,KAAK;EACd,CAAC;EAgBD,IAAI6C,iBAAiB,GAAG,SAAAA,CAAUC,GAAG,EAAE;IACrC,IAAIC,KAAK,CAACC,OAAO,CAACF,GAAG,CAAC,EAAE;MACtB,KAAK,IAAIrF,CAAC,GAAG,CAAC,EAAEwF,IAAI,GAAGF,KAAK,CAACD,GAAG,CAAClD,MAAM,CAAC,EAAEnC,CAAC,GAAGqF,GAAG,CAAClD,MAAM,EAAEnC,CAAC,EAAE,EAAEwF,IAAI,CAACxF,CAAC,CAAC,GAAGqF,GAAG,CAACrF,CAAC,CAAC;MAE/E,OAAOwF,IAAI;IACb,CAAC,MAAM;MACL,OAAOF,KAAK,CAACG,IAAI,CAACJ,GAAG,CAAC;IACxB;EACF,CAAC;EAED,IAAIK,UAAU,GAAG,SAASA,UAAUA,CAACC,KAAK,EAAE9E,KAAK,EAAE+E,YAAY,EAAE;IAC7D,OAAO,EAAE,CAACC,MAAM,CAACT,iBAAiB,CAACO,KAAK,CAACG,KAAK,CAAC,CAAC,EAAEjF,KAAK,CAAC,CAAC,EAAE,CAAC+E,YAAY,CAAC,EAAER,iBAAiB,CAACO,KAAK,CAACG,KAAK,CAACjF,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;EACzH,CAAC;EAED,IAAIkF,QAAQ,GAAG,SAASA,QAAQA,CAAC1C,CAAC,EAAEC,CAAC,EAAE;IACnC,OAAOD,CAAC,GAAGC,CAAC;EAChB,CAAC;;EAED;EACA;EACA;EACA;EACA,IAAI0C,eAAe,GAAG,SAASA,eAAeA,CAAA,EAAG;IAC7C,IAAIC,KAAK,GAAG,IAAI;IAEhB,IAAIC,YAAY,GAAGH,QAAQ;IAE3B,IAAII,aAAa,GAAG,SAASA,aAAaA,CAAA,EAAG;MACzC,OAAO,CAAC;IACZ,CAAC;IAED,IAAInC,UAAU,GAAG,KAAK,CAAC;IAEvB,IAAIoC,iBAAiB,GAAG,SAASA,iBAAiBA,CAACC,SAAS,EAAExF,KAAK,EAAE;MACjE,OAAOoF,KAAK,GAAGE,aAAa,CAACnC,UAAU,CAACnD,KAAK,CAAC,EAAEA,KAAK,EAAEmD,UAAU,CAAC,GAAGmC,aAAa,CAACE,SAAS,EAAExF,KAAK,EAAE6E,UAAU,CAAC1B,UAAU,EAAEnD,KAAK,EAAEwF,SAAS,CAAC,CAAC;IAClJ,CAAC;IAED,IAAIxE,MAAM,GAAG,SAASA,MAAMA,CAACwE,SAAS,EAAExF,KAAK,EAAE;MAC3C,IAAI,CAACoF,KAAK,EAAE;QACRA,KAAK,GAAG7G,OAAO,CAAC6E,GAAG,CAACD,UAAU,CAAC5C,GAAG,CAAC,UAAUkF,CAAC,EAAEtG,CAAC,EAAE;UAC/C,OAAOmG,aAAa,CAACG,CAAC,EAAEtG,CAAC,EAAEgE,UAAU,CAAC;QAC1C,CAAC,CAAC,CAAC;MACP;MAEA,IAAIuC,QAAQ,GAAGH,iBAAiB,CAACC,SAAS,EAAExF,KAAK,CAAC;MAElD,IAAIqF,YAAY,CAACK,QAAQ,EAAEN,KAAK,CAAC,EAAE;QAC/B,OAAOD,eAAe,CAAC,CAAC,CAACG,aAAa,CAACA,aAAa,CAAC,CAACD,YAAY,CAACA,YAAY,CAAC,CAACD,KAAK,CAACM,QAAQ,CAAC,CAACvC,UAAU,CAAC0B,UAAU,CAAC1B,UAAU,EAAEnD,KAAK,EAAEwF,SAAS,CAAC,CAAC;MACzJ,CAAC,MAAM;QACH,OAAOxE,MAAM;MACjB;IACJ,CAAC;IAEDA,MAAM,CAACmC,UAAU,GAAG,YAAY;MAC5B,IAAI,CAAC9B,SAAS,CAACC,MAAM,EAAE;QACnB,OAAO6B,UAAU;MACrB;MACAA,UAAU,GAAG9B,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MAC7D,OAAOL,MAAM;IACjB,CAAC;IACDA,MAAM,CAACoE,KAAK,GAAG,YAAY;MACvB,IAAI,CAAC/D,SAAS,CAACC,MAAM,EAAE;QACnB,OAAO8D,KAAK;MAChB;MACAA,KAAK,GAAG/D,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MACxD,OAAOL,MAAM;IACjB,CAAC;IACDA,MAAM,CAACqE,YAAY,GAAG,YAAY;MAC9B,IAAI,CAAChE,SAAS,CAACC,MAAM,EAAE;QACnB,OAAO+D,YAAY;MACvB;MACAA,YAAY,GAAGhE,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MAC/D,OAAOL,MAAM;IACjB,CAAC;IACDA,MAAM,CAACsE,aAAa,GAAG,YAAY;MAC/B,IAAI,CAACjE,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOgE,aAAa;MACxB;MACAA,aAAa,GAAGjE,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MAChE,OAAOL,MAAM;IACjB,CAAC;IAED,OAAOA,MAAM;EACjB,CAAC;EAED,IAAI2E,MAAM,GAAI,SAAAA,CAAA,EAAY;IAEtB,IAAIC,MAAM,GAAG,KAAK,CAAC;IAEnB,IAAIC,gBAAgB,GAAG,SAASA,gBAAgBA,CAACC,SAAS,EAAE;MACxD,OAAOF,MAAM,GAAGE,SAAS,CAAChF,KAAK,GAAGgF,SAAS,CAAC/E,MAAM,GAAG2B,SAAS,CAACoD,SAAS,EAAEF,MAAM,CAAC,GAAG,CAAC;IACzF,CAAC;IAED,IAAIG,mBAAmB,GAAG,SAASA,mBAAmBA,CAACD,SAAS,EAAE9F,KAAK,EAAEmD,UAAU,EAAE;MACjF,OAAOD,aAAa,CAACC,UAAU,EAAEnD,KAAK,CAAC,GAAG6F,gBAAgB,CAACC,SAAS,CAAC;IACzE,CAAC;IAED,IAAIxG,QAAQ,GAAG,SAASA,QAAQA,CAACS,IAAI,EAAE;MACnC,IAAIoD,UAAU,GAAGgC,eAAe,CAAC,CAAC,CAACG,aAAa,CAACS,mBAAmB,CAAC,CAAC5C,UAAU,CAACpD,IAAI,CAAC;MAEtFA,IAAI,CAACiG,OAAO,CAAC,UAAUF,SAAS,EAAE9F,KAAK,EAAE;QACrCuD,UAAU,CAACuC,SAAS,CAAC,CAACE,OAAO,CAAC,UAAUR,SAAS,EAAES,cAAc,EAAE;UAC/D9C,UAAU,GAAGA,UAAU,CAACqC,SAAS,EAAExF,KAAK,CAAC;QAC7C,CAAC,CAAC;MACN,CAAC,CAAC;MACF,OAAOmD,UAAU,CAACA,UAAU,CAAC,CAAC;IAClC,CAAC;IAED7D,QAAQ,CAACsG,MAAM,GAAG,YAAY;MAC1B,IAAI,CAACvE,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOsE,MAAM;MACjB;MACAA,MAAM,GAAGvE,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MACzD,OAAO/B,QAAQ;IACnB,CAAC;IAED,OAAOA,QAAQ;EACnB,CAAE;EAEF,IAAI4G,UAAU,GAAG,SAASA,UAAUA,CAACpB,KAAK,EAAE;IACxC,OAAOA,KAAK,CAACqB,WAAW,CAACrB,KAAK,CAAC,CAAC;EACpC,CAAC;EAED,IAAIqB,WAAW,GAAG,SAASA,WAAWA,CAACrB,KAAK,EAAE;IAC1C,OAAOlC,IAAI,CAACwD,KAAK,CAACxD,IAAI,CAACyD,MAAM,CAAC,CAAC,GAAGvB,KAAK,CAACxD,MAAM,CAAC;EACnD,CAAC;EAED,IAAIgF,SAAS,GAAI,SAAAA,CAAA,EAAY;IAEzB,IAAIC,WAAW,GAAG,IAAI;IACtB,IAAIC,OAAO,GAAG,CAAC;IACf,IAAIZ,MAAM,GAAG,KAAK,CAAC;IAEnB,IAAIa,kBAAkB,GAAG,SAASA,kBAAkBA,CAACX,SAAS,EAAE;MAC5D,QAAQA,SAAS,CAACxC,QAAQ;QACtB,KAAK,cAAc;UACf,OAAO,CAAC;QACZ,KAAK,cAAc;QACnB,KAAK,eAAe;UAChB,OAAOwC,SAAS,CAAChF,KAAK,GAAGgF,SAAS,CAAC/E,MAAM,GAAG,CAAC;MACrD;MACA,OAAO+E,SAAS,CAAChF,KAAK,GAAGgF,SAAS,CAAC/E,MAAM,GAAG,CAAC;IACjD,CAAC;IAED,IAAI8E,gBAAgB,GAAG,SAASA,gBAAgBA,CAACC,SAAS,EAAE;MACxD,OAAOF,MAAM,GAAGE,SAAS,CAAChF,KAAK,GAAGgF,SAAS,CAAC/E,MAAM,GAAG2B,SAAS,CAACoD,SAAS,EAAEF,MAAM,CAAC,GAAG,CAAC;IACzF,CAAC;IAED,IAAIG,mBAAmB,GAAG,SAASA,mBAAmBA,CAACD,SAAS,EAAE9F,KAAK,EAAEmD,UAAU,EAAE;MACjF,OAAOD,aAAa,CAACC,UAAU,EAAEnD,KAAK,CAAC,GAAG6F,gBAAgB,CAACC,SAAS,CAAC,GAAGW,kBAAkB,CAACX,SAAS,CAAC;IACzG,CAAC;IAED,IAAIxG,QAAQ,GAAG,SAASA,QAAQA,CAACS,IAAI,EAAE;MACnC,IAAI2G,kBAAkB,GAAGH,WAAW;;MAEpC;MACA,IAAIlB,YAAY,GAAG,SAASA,YAAYA,CAACK,QAAQ,EAAEiB,QAAQ,EAAE;QACzD,OAAO/D,IAAI,CAACgE,GAAG,CAAC,CAACD,QAAQ,GAAGjB,QAAQ,IAAIgB,kBAAkB,CAAC,GAAG9D,IAAI,CAACyD,MAAM,CAAC,CAAC;MAC/E,CAAC;MAED,IAAIlD,UAAU,GAAGgC,eAAe,CAAC,CAAC,CAACG,aAAa,CAACS,mBAAmB,CAAC,CAACV,YAAY,CAACA,YAAY,CAAC,CAAClC,UAAU,CAACpD,IAAI,CAAC;MAEjH,OAAO2G,kBAAkB,GAAG,CAAC,EAAE;QAC3B,IAAI1G,KAAK,GAAGmG,WAAW,CAACpG,IAAI,CAAC;QAC7B,IAAI8G,kBAAkB,GAAGX,UAAU,CAAC3C,UAAU,CAACxD,IAAI,CAACC,KAAK,CAAC,CAAC,CAAC;QAC5DmD,UAAU,GAAGA,UAAU,CAAC0D,kBAAkB,EAAE7G,KAAK,CAAC;QAClD0G,kBAAkB,IAAIF,OAAO;MACjC;MACA,OAAOrD,UAAU,CAACA,UAAU,CAAC,CAAC;IAClC,CAAC;IAED7D,QAAQ,CAACiH,WAAW,GAAG,YAAY;MAC/B,IAAI,CAAClF,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOiF,WAAW;MACtB;MACAA,WAAW,GAAGlF,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MAC9D,OAAO/B,QAAQ;IACnB,CAAC;IAEDA,QAAQ,CAACkH,OAAO,GAAG,YAAY;MAC3B,IAAI,CAACnF,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOkF,OAAO;MAClB;MACAA,OAAO,GAAGnF,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MAC1D,OAAO/B,QAAQ;IACnB,CAAC;IAEDA,QAAQ,CAACsG,MAAM,GAAG,YAAY;MAC1B,IAAI,CAACvE,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOsE,MAAM;MACjB;MACAA,MAAM,GAAGvE,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MACzD,OAAO/B,QAAQ;IACnB,CAAC;IAED,OAAOA,QAAQ;EACnB,CAAE;EAEF,IAAIwH,aAAa,GAAG,SAASA,aAAaA,CAAChC,KAAK,EAAEiC,UAAU,EAAE;IAC1D,OAAOjC,KAAK,CAACvG,OAAO,CAACyI,IAAI,CAAClC,KAAK,EAAEiC,UAAU,CAAC,CAAC;EACjD,CAAC;EAED,IAAIE,cAAc,GAAI,SAAAA,CAAUC,eAAe,EAAE;IAE7CA,eAAe,GAAGA,eAAe,IAAI,UAAU9H,CAAC,EAAE;MAC9C,OAAOA,CAAC;IACZ,CAAC;IAED,IAAI6H,cAAc,GAAG,SAASA,cAAcA,CAACjG,MAAM,EAAE;MACjDA,MAAM,GAAGkG,eAAe,CAAClG,MAAM,CAAC;MAEhC,IAAImG,KAAK,GAAG,SAASA,KAAKA,CAAA,EAAG;QACzB;QACA;QACA,IAAIC,OAAO,GAAGpG,MAAM,CAACqG,MAAM,CAAC,UAAUxI,CAAC,EAAE;UACrC,OAAO,CAACA,CAAC,CAACgC,MAAM;QACpB,CAAC,CAAC;QACF,IAAIyG,UAAU,GAAGF,OAAO,CAAC7G,GAAG,CAAC,UAAU1B,CAAC,EAAEM,CAAC,EAAE;UACzC,OAAO,CAACN,CAAC,EAAEqE,aAAa,CAACkE,OAAO,EAAEjI,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC;QACF,IAAIoI,gBAAgB,GAAGT,aAAa,CAACQ,UAAU,EAAE,UAAU9E,CAAC,EAAEC,CAAC,EAAE;UAC7D,OAAOA,CAAC,CAAC,CAAC,CAAC,GAAGD,CAAC,CAAC,CAAC,CAAC;QACtB,CAAC,CAAC;QACF,IAAI+E,gBAAgB,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;UACzBA,gBAAgB,CAAC,CAAC,CAAC,CAAC1G,MAAM,GAAG,IAAI;QACrC,CAAC,MAAM;UACH,OAAO,OAAO;QAClB;MACJ,CAAC;MAED,OAAO,IAAI,EAAE;QACT,IAAI2G,IAAI,GAAGL,KAAK,CAAC,CAAC;QAElB,IAAIK,IAAI,KAAK,OAAO,EAAE;MAC1B;MACA,OAAOxG,MAAM;IACjB,CAAC;IAEDrC,UAAU,CAACwC,SAAS,CAAC8F,cAAc,EAAEC,eAAe,CAAC;IAErD,OAAOD,cAAc;EACzB,CAAE;EAEF,IAAIQ,WAAW,GAAI,SAAAA,CAAA,EAAY;IAE3B,IAAI7B,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;IAEnB,IAAItG,QAAQ,GAAG,SAASA,QAAQA,CAACS,IAAI,EAAE;MACnC,OAAOA,IAAI,CAACQ,GAAG,CAAC,UAAU1B,CAAC,EAAEM,CAAC,EAAE;QAC5B,IAAIuI,EAAE,GAAG7I,CAAC,CAACO,CAAC;QACZ,IAAIuI,EAAE,GAAG9I,CAAC,CAACQ,CAAC;QACZ,IAAIqI,EAAE,GAAG7I,CAAC,CAACiC,KAAK,GAAG8E,MAAM,CAAC,CAAC,CAAC,EAAE;UAC1B8B,EAAE,IAAI7I,CAAC,CAACiC,KAAK;QACjB;QAEA,IAAI6G,EAAE,GAAG9I,CAAC,CAACkC,MAAM,GAAG6E,MAAM,CAAC,CAAC,CAAC,EAAE;UAC3B+B,EAAE,IAAI9I,CAAC,CAACkC,MAAM;QAClB;QACA,OAAO;UAAEA,MAAM,EAAElC,CAAC,CAACkC,MAAM;UAAED,KAAK,EAAEjC,CAAC,CAACiC,KAAK;UAAE1B,CAAC,EAAEsI,EAAE;UAAErI,CAAC,EAAEsI;QAAG,CAAC;MAC7D,CAAC,CAAC;IACN,CAAC;IAEDrI,QAAQ,CAACsG,MAAM,GAAG,YAAY;MAC1B,IAAI,CAACvE,SAAS,CAACC,MAAM,EAAE;QACnB,OAAOsE,MAAM;MACjB;MACAA,MAAM,GAAGvE,SAAS,CAACC,MAAM,IAAI,CAAC,GAAGC,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC;MACzD,OAAO/B,QAAQ;IACnB,CAAC;IAED,OAAOA,QAAQ;EACnB,CAAE;EAEFtB,OAAO,CAAC4J,WAAW,GAAG9I,KAAK;EAC3Bd,OAAO,CAAC6J,eAAe,GAAGrG,SAAS;EACnCxD,OAAO,CAAC8J,YAAY,GAAGnC,MAAM;EAC7B3H,OAAO,CAAC+J,eAAe,GAAGzB,SAAS;EACnCtI,OAAO,CAACgK,oBAAoB,GAAGf,cAAc;EAC7CjJ,OAAO,CAACiK,iBAAiB,GAAGR,WAAW;EAEvC1D,MAAM,CAACmE,cAAc,CAAClK,OAAO,EAAE,YAAY,EAAE;IAAE0D,KAAK,EAAE;EAAK,CAAC,CAAC;AAE7D,CAAE,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}