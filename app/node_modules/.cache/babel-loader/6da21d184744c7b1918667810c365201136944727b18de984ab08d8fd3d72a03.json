{"ast":null,"code":"require('../../lib/keyboard.polyfill');\nvar MAX_DELTA = 0.2,\n  PROXY_FLAG = '__keyboard-controls-proxy';\nvar KeyboardEvent = window.KeyboardEvent;\n\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if you’re a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled: {\n      default: true\n    },\n    debug: {\n      default: false\n    }\n  },\n  init: function init() {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this)\n    };\n    this.attachEventListeners();\n  },\n  /*******************************************************************\n  * Movement\n  */\n\n  isVelocityActive: function isVelocityActive() {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    var data = this.data,\n      keys = this.getKeys();\n    this.dVelocity.set(0, 0, 0);\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp) {\n        this.dVelocity.z -= 1;\n      }\n      if (keys.KeyA || keys.ArrowLeft) {\n        this.dVelocity.x -= 1;\n      }\n      if (keys.KeyS || keys.ArrowDown) {\n        this.dVelocity.z += 1;\n      }\n      if (keys.KeyD || keys.ArrowRight) {\n        this.dVelocity.x += 1;\n      }\n    }\n    return this.dVelocity.clone();\n  },\n  /*******************************************************************\n  * Events\n  */\n\n  play: function play() {\n    this.attachEventListeners();\n  },\n  pause: function pause() {\n    this.removeEventListeners();\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  attachEventListeners: function attachEventListeners() {\n    window.addEventListener('keydown', this.listeners.keydown, false);\n    window.addEventListener('keyup', this.listeners.keyup, false);\n    window.addEventListener('blur', this.listeners.blur, false);\n  },\n  removeEventListeners: function removeEventListeners() {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n  onKeyDown: function onKeyDown(event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n  onKeyUp: function onKeyUp(event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n  onBlur: function onBlur() {\n    for (var code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n  emit: function emit(event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    }\n\n    // Emit convenience event, identifying key.\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n  /*******************************************************************\n  * Accessors\n  */\n\n  isPressed: function isPressed(code) {\n    return code in this.getKeys();\n  },\n  getKeys: function getKeys() {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n    return this.localKeys;\n  },\n  isProxied: function isProxied() {\n    var proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n});","map":{"version":3,"names":["require","MAX_DELTA","PROXY_FLAG","KeyboardEvent","window","module","exports","AFRAME","registerComponent","schema","enabled","default","debug","init","dVelocity","THREE","Vector3","localKeys","listeners","keydown","onKeyDown","bind","keyup","onKeyUp","blur","onBlur","attachEventListeners","isVelocityActive","data","Object","keys","getKeys","length","getVelocityDelta","set","KeyW","ArrowUp","z","KeyA","ArrowLeft","x","KeyS","ArrowDown","KeyD","ArrowRight","clone","play","pause","removeEventListeners","remove","addEventListener","removeEventListener","event","utils","shouldCaptureKeyEvent","code","emit","hasOwnProperty","el","type","console","log","isPressed","isProxied","sceneEl","components","getKeyboard","proxyControls","isConnected"],"sources":["/Users/Shivam/Library/CloudStorage/GoogleDrive-sraval@g.harvard.edu/My Drive/Github/embedding-modifier/app/node_modules/aframe-extras/src/controls/keyboard-controls.js"],"sourcesContent":["require('../../lib/keyboard.polyfill');\n\nconst MAX_DELTA = 0.2,\n    PROXY_FLAG = '__keyboard-controls-proxy';\n\nconst KeyboardEvent = window.KeyboardEvent;\n\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if you’re a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled:           { default: true },\n    debug:             { default: false }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this)\n    };\n    this.attachEventListeners();\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n\n  getVelocityDelta: function () {\n    const data = this.data,\n        keys = this.getKeys();\n\n    this.dVelocity.set(0, 0, 0);\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp)    { this.dVelocity.z -= 1; }\n      if (keys.KeyA || keys.ArrowLeft)  { this.dVelocity.x -= 1; }\n      if (keys.KeyS || keys.ArrowDown)  { this.dVelocity.z += 1; }\n      if (keys.KeyD || keys.ArrowRight) { this.dVelocity.x += 1; }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n\n  play: function () {\n    this.attachEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  attachEventListeners: function () {\n    window.addEventListener('keydown', this.listeners.keydown, false);\n    window.addEventListener('keyup', this.listeners.keyup, false);\n    window.addEventListener('blur', this.listeners.blur, false);\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n\n  onKeyDown: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n\n  onKeyUp: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n\n  onBlur: function () {\n    for (let code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  emit: function (event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    }\n\n    // Emit convenience event, identifying key.\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n\n  isPressed: function (code) {\n    return code in this.getKeys();\n  },\n\n  getKeys: function () {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n    return this.localKeys;\n  },\n\n  isProxied: function () {\n    const proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n\n});\n"],"mappings":"AAAAA,OAAO,CAAC,6BAA6B,CAAC;AAEtC,IAAMC,SAAS,GAAG,GAAG;EACjBC,UAAU,GAAG,2BAA2B;AAE5C,IAAMC,aAAa,GAAGC,MAAM,CAACD,aAAa;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAE,MAAM,CAACC,OAAO,GAAGC,MAAM,CAACC,iBAAiB,CAAC,mBAAmB,EAAE;EAC7DC,MAAM,EAAE;IACNC,OAAO,EAAY;MAAEC,OAAO,EAAE;IAAK,CAAC;IACpCC,KAAK,EAAc;MAAED,OAAO,EAAE;IAAM;EACtC,CAAC;EAEDE,IAAI,EAAE,SAAAA,KAAA,EAAY;IAChB,IAAI,CAACC,SAAS,GAAG,IAAIC,KAAK,CAACC,OAAO,CAAC,CAAC;IACpC,IAAI,CAACC,SAAS,GAAG,CAAC,CAAC;IACnB,IAAI,CAACC,SAAS,GAAG;MACfC,OAAO,EAAE,IAAI,CAACC,SAAS,CAACC,IAAI,CAAC,IAAI,CAAC;MAClCC,KAAK,EAAE,IAAI,CAACC,OAAO,CAACF,IAAI,CAAC,IAAI,CAAC;MAC9BG,IAAI,EAAE,IAAI,CAACC,MAAM,CAACJ,IAAI,CAAC,IAAI;IAC7B,CAAC;IACD,IAAI,CAACK,oBAAoB,CAAC,CAAC;EAC7B,CAAC;EAED;AACF;AACA;;EAEEC,gBAAgB,EAAE,SAAAA,iBAAA,EAAY;IAC5B,OAAO,IAAI,CAACC,IAAI,CAAClB,OAAO,IAAI,CAAC,CAACmB,MAAM,CAACC,IAAI,CAAC,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,MAAM;EAClE,CAAC;EAEDC,gBAAgB,EAAE,SAAAA,iBAAA,EAAY;IAC5B,IAAML,IAAI,GAAG,IAAI,CAACA,IAAI;MAClBE,IAAI,GAAG,IAAI,CAACC,OAAO,CAAC,CAAC;IAEzB,IAAI,CAACjB,SAAS,CAACoB,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC3B,IAAIN,IAAI,CAAClB,OAAO,EAAE;MAChB,IAAIoB,IAAI,CAACK,IAAI,IAAIL,IAAI,CAACM,OAAO,EAAK;QAAE,IAAI,CAACtB,SAAS,CAACuB,CAAC,IAAI,CAAC;MAAE;MAC3D,IAAIP,IAAI,CAACQ,IAAI,IAAIR,IAAI,CAACS,SAAS,EAAG;QAAE,IAAI,CAACzB,SAAS,CAAC0B,CAAC,IAAI,CAAC;MAAE;MAC3D,IAAIV,IAAI,CAACW,IAAI,IAAIX,IAAI,CAACY,SAAS,EAAG;QAAE,IAAI,CAAC5B,SAAS,CAACuB,CAAC,IAAI,CAAC;MAAE;MAC3D,IAAIP,IAAI,CAACa,IAAI,IAAIb,IAAI,CAACc,UAAU,EAAE;QAAE,IAAI,CAAC9B,SAAS,CAAC0B,CAAC,IAAI,CAAC;MAAE;IAC7D;IAEA,OAAO,IAAI,CAAC1B,SAAS,CAAC+B,KAAK,CAAC,CAAC;EAC/B,CAAC;EAED;AACF;AACA;;EAEEC,IAAI,EAAE,SAAAA,KAAA,EAAY;IAChB,IAAI,CAACpB,oBAAoB,CAAC,CAAC;EAC7B,CAAC;EAEDqB,KAAK,EAAE,SAAAA,MAAA,EAAY;IACjB,IAAI,CAACC,oBAAoB,CAAC,CAAC;EAC7B,CAAC;EAEDC,MAAM,EAAE,SAAAA,OAAA,EAAY;IAClB,IAAI,CAACF,KAAK,CAAC,CAAC;EACd,CAAC;EAEDrB,oBAAoB,EAAE,SAAAA,qBAAA,EAAY;IAChCtB,MAAM,CAAC8C,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAChC,SAAS,CAACC,OAAO,EAAE,KAAK,CAAC;IACjEf,MAAM,CAAC8C,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAChC,SAAS,CAACI,KAAK,EAAE,KAAK,CAAC;IAC7DlB,MAAM,CAAC8C,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAChC,SAAS,CAACM,IAAI,EAAE,KAAK,CAAC;EAC7D,CAAC;EAEDwB,oBAAoB,EAAE,SAAAA,qBAAA,EAAY;IAChC5C,MAAM,CAAC+C,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACjC,SAAS,CAACC,OAAO,CAAC;IAC7Df,MAAM,CAAC+C,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACjC,SAAS,CAACI,KAAK,CAAC;IACzDlB,MAAM,CAAC+C,mBAAmB,CAAC,MAAM,EAAE,IAAI,CAACjC,SAAS,CAACM,IAAI,CAAC;EACzD,CAAC;EAEDJ,SAAS,EAAE,SAAAA,UAAUgC,KAAK,EAAE;IAC1B,IAAI7C,MAAM,CAAC8C,KAAK,CAACC,qBAAqB,CAACF,KAAK,CAAC,EAAE;MAC7C,IAAI,CAACnC,SAAS,CAACmC,KAAK,CAACG,IAAI,CAAC,GAAG,IAAI;MACjC,IAAI,CAACC,IAAI,CAACJ,KAAK,CAAC;IAClB;EACF,CAAC;EAED7B,OAAO,EAAE,SAAAA,QAAU6B,KAAK,EAAE;IACxB,IAAI7C,MAAM,CAAC8C,KAAK,CAACC,qBAAqB,CAACF,KAAK,CAAC,EAAE;MAC7C,OAAO,IAAI,CAACnC,SAAS,CAACmC,KAAK,CAACG,IAAI,CAAC;MACjC,IAAI,CAACC,IAAI,CAACJ,KAAK,CAAC;IAClB;EACF,CAAC;EAED3B,MAAM,EAAE,SAAAA,OAAA,EAAY;IAClB,KAAK,IAAI8B,IAAI,IAAI,IAAI,CAACtC,SAAS,EAAE;MAC/B,IAAI,IAAI,CAACA,SAAS,CAACwC,cAAc,CAACF,IAAI,CAAC,EAAE;QACvC,OAAO,IAAI,CAACtC,SAAS,CAACsC,IAAI,CAAC;MAC7B;IACF;EACF,CAAC;EAEDC,IAAI,EAAE,SAAAA,KAAUJ,KAAK,EAAE;IACrB;IACA;;IAEA;IACA,IAAIlD,UAAU,IAAIkD,KAAK,EAAE;MACvB;MACA,IAAI,CAACM,EAAE,CAACF,IAAI,CAACJ,KAAK,CAACO,IAAI,EAAEP,KAAK,CAAC;IACjC;;IAEA;IACA,IAAI,CAACM,EAAE,CAACF,IAAI,CAACJ,KAAK,CAACO,IAAI,GAAG,GAAG,GAAGP,KAAK,CAACG,IAAI,EAAE,IAAIpD,aAAa,CAACiD,KAAK,CAACO,IAAI,EAAEP,KAAK,CAAC,CAAC;IACjF,IAAI,IAAI,CAACxB,IAAI,CAAChB,KAAK,EAAEgD,OAAO,CAACC,GAAG,CAACT,KAAK,CAACO,IAAI,GAAG,GAAG,GAAGP,KAAK,CAACG,IAAI,CAAC;EACjE,CAAC;EAED;AACF;AACA;;EAEEO,SAAS,EAAE,SAAAA,UAAUP,IAAI,EAAE;IACzB,OAAOA,IAAI,IAAI,IAAI,CAACxB,OAAO,CAAC,CAAC;EAC/B,CAAC;EAEDA,OAAO,EAAE,SAAAA,QAAA,EAAY;IACnB,IAAI,IAAI,CAACgC,SAAS,CAAC,CAAC,EAAE;MACpB,OAAO,IAAI,CAACL,EAAE,CAACM,OAAO,CAACC,UAAU,CAAC,gBAAgB,CAAC,CAACC,WAAW,CAAC,CAAC;IACnE;IACA,OAAO,IAAI,CAACjD,SAAS;EACvB,CAAC;EAED8C,SAAS,EAAE,SAAAA,UAAA,EAAY;IACrB,IAAMI,aAAa,GAAG,IAAI,CAACT,EAAE,CAACM,OAAO,CAACC,UAAU,CAAC,gBAAgB,CAAC;IAClE,OAAOE,aAAa,IAAIA,aAAa,CAACC,WAAW,CAAC,CAAC;EACrD;AAEF,CAAC,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}